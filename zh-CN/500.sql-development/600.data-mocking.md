# 生成测试数据

## 背景信息

OceanBase 开发者中心（OceanBase Developer Center，ODC）提供模拟数据功能供用户在测试数据库性能或者验证功能等需要大量模拟数据的场景下，能够快速根据表中的字段类型生成数据。

本文档旨在介绍如何在工单中，根据数据库中存在的表生成模拟数据。

<main id="notice" type='explain'>
   <h4>说明</h4>
   <p>文中所使用的均为示例数据，您可根据实际情况对数据进行替换。</p>
</main>

## 注意事项

- 单次模拟数据上限为 1 亿行。

- 拥有检查约束的表，不支持对其进行模拟数据。

- Range，List 分区表不支持对其进行模拟数据。

- 使用 ZHSGB2312 编码的表，不支持对其进行模拟数据。

## 新建模拟数据

1. 在 SQL 开发窗口，单击工单 > **模拟数据** > **新建模拟数据**。

   ![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/420/sql-development/data%20mocking/1.png)

2. 在新建模拟数据页面中，指定以下信息。

   ![2](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/420/sql-development/data%20mocking/2.png)

   | 信息项 | 说明 |
   | -------- | -------- |
   |数据库 | 选择需变更的数据库 odc_test。 |
   |表|选择当前数据库 odc_test 中存在的表 employee，以生成该表的模拟数据。|
   |模拟生成数据量|指定需要生成的数据量。默认值：1000 条数据，最多生成不超过 1 亿行数据，所以用户可以在文本框中输入 1\~1000000 间的任意正整数。|
   |批处理大小|指定每生成多少条数据进行一次提交（`COMMIT` 命令）操作。默认每生成 200 条数据进行一次提交，最大不超过 500 条，所以您可以在文本框中输入 1\~500 间的任意正整数。|
   |插入模拟数据清空表|选择当在表中插入模拟数据时是否清空表中原有的数据。|
   |数据冲突处理方式|选择当生成的数据有冲突时处理的方式。ODC 支持如下处理方式：<ul><li>**忽略** ：默认为忽略，若数据有冲突则冲突数据不被插入。</li><li>**覆盖** ：若数据有冲突则删除原数据插入新数据。</li><li>**终止** ：若数据有冲突则停止生成数据终止整个模拟数据任务。</li></ul>|
   |规则设置|设置数据生成规则。<br>在 **规则** 和 **细则** 列中对选择的表中的 **字段名称** 和 **字段类型** 设置模拟数据生成的规则。其中 **规则** 列中会根据字段类型提供一些内置的对应规则。 **细则** 列会根据您选择的规则展示具体的规则信息，用户可以单击细则信息后的编辑图标对细则信息进行修改。|
   |任务设置|选择 **立即执行** 或者 **定时执行**。|

3. 单击 **提交**，生成模拟数据任务。

4. 任务生成后会自动弹出 **任务中心** 面板，在任务中心可以查看任务审批结果和任务信息。
   
   ![3](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/420/sql-development/data%20mocking/3.png)

    
## 查看模拟数据

### 任务信息 

1. 在 **任务中心** 的模拟数据列表中，单击操作列中的 **查看** 按钮弹出目标任务的任务详情面板，在面板的右上角单击 **任务信息** 标签查看任务基本信息和模拟数据设置信息。

   ![3](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/420/sql-development/data%20mocking/3.png)


   |   信息项    |  说明   |
   |----------|------------------|
   | 任务基本信息   | 显示 **任务编号**、**所属连接**、**所属数据库**、**任务类型**、**执行方式**、**创建人** 和 **创建时间** 等信息。|
   | 模拟数据设置信息 | 显示创建模拟数据任务时您选择的 **目标表**、 **模拟生成数据量**、 **批处理大小**、 **插入模拟数据前清空表**、 **数据冲突处理方式**、 **实际插入记录**、 **冲突记录**、 **忽略插入**、 **清除记录** 和 **规则设置展示** 等信息。 |

2. 在任务信息面板右下角，单击 **再次发起** 和 **下载**，可以重新发起任务和下载导出文件至本地。

### 任务日志 

在 **任务中心** 的模拟数据列表中，单击操作列中的 **查看** 按钮弹出目标任务的任务详情面板，在面板的右上角单击 **任务日志** 标签查看任务的全部日志和告警日志。


| 信息项  | 说明  |
|---------------|------------------|
| 全部日志 | 全部日志显示任务的 **INFO** 、 **ERROR** 和 **WARN** 日志等全量信息。  |
| 告警日志 | 告警日志单独显示任务的 **ERROR** 和 **WARN** 日志。 当任务失败时，可查看告警日志以获得错误信息。 |

同时，工具栏提供了以下功能键：

| 功能  |                            说明                             |
|------|-----------------------------------------------------------|
| 查找 | 单击该按钮查找日志信息。        |
| 下载 | 单击该按钮下载日志信息。 |
| 复制 | 单击该按钮复制日志信息。 |


## 下载模拟数据

在 **任务中心** 的模拟数据列表中，单击操作列中的 **下载** 按钮下载创建的模拟数据到本地磁盘，用户可以从本地磁盘中查看导出的数据结构文件。

![3](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/420/sql-development/data%20mocking/3.png)

## 相关文档

- [SQL 编辑和执行](../500.sql-development/100.sql-editing-and-execution.md)

- [PL 编译和调试](../500.sql-development/200.pl-compile-and-debug.md)

- [命令行窗口](../500.sql-development/300.command-line-window.md)

- [结果编辑与导出](../500.sql-development/400.result-editing-and-exporting.md)

- [执行分析](../500.sql-development/500.perform-analysis.md)

- [数据库变更管理](../700.database-change-management/600.database-change.md)

- [分区管理](../800.data-Lifecycle-management/300.partition-scheme-management/310.manage-partition-scheme.md)

- [影子表同步](../700.database-change-management/800.shadow-table-synchronization.md)

- [无锁结构变更](../700.database-change-management/700.table-structure-change.md)
