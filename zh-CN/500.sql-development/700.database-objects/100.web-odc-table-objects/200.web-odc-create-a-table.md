# 新建表 

## 概述 

OceanBase 开发者中心（OceanBase Developer Center，ODC）支持可视化方式创建表。本文档旨在介绍如何使用 ODC 创建表。

![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/420/900.database-objects/1.web-odc-table-objects/1.png)

如上图所示，创建表包含以下 7 个步骤：

1. 指定基本信息。

2. 设置列。

3. 设置索引。

4. 设置约束。

5. 设置分区规则。

6. 确认 SQL。

7. 完成新建表。

本文档以创建表为例，介绍如何在 SQL 窗口中创建表 employee 到数据库 odc_test 中，员工表中包含员工工号（emp_no）、员工生日（birthday）、员工姓名（name）和员工性别（gender）。

<main id="notice" type='explain'>
   <h4>说明</h4>
   <p>文中所使用的均为示例数据，您可根据实际情况对数据进行替换。</p>
</main>

## 操作步骤 

:::tab
tab 新建数据库表

### 步骤一：指定基本信息 

1. 登录数据库并进入 SQL 开发窗口后，在左侧导航栏中单击 **表** 标签可查看表列表。在表列表的右上角，单击 **+** 以创建表对象。

2. 在 **基本信息** 中，输入 **表名称**、选择 **存储模式** 和表的 **描述**。

   ![step 1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/500.sql-development/700.database-objects/100.web-odc-table-objects/200.web-odc-create-a-table/step%201.png)

   <main id="notice" type='explain'>
      <h4>说明</h4>
      <ul>
      <li>在 MySQL 模式下，同时需要选择默认字符集和默认排序规则。</li>
      <li>完成指定基本信息并切换至设置列步骤后，表示确认提交基本信息。</li>
      <li>仅 OceanBase V4.3.0 及之后的版本支持配置<a href="[../../3.develop/4.replace-data-of-mysql-mode.md](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000000640601)">列存</a>。</li>
      </ul>
   </main>

### 步骤二：设置列 

<main id="notice" type='explain'>
   <h4>说明</h4>
   <p>ODC V4.2.3 及之后的版本支持创建包含 <a href="https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000000221534">OceanBase MySQL</a>/<a href="https://dev.mysql.com/doc/refman/8.0/en/spatial-type-overview.html">MySQL</a> 空间数据类型（GIS）字段（列）的表。</p>
</main>

如下图所示，添加一列时需指定以下信息：

![step 2](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/500.sql-development/700.database-objects/100.web-odc-table-objects/200.web-odc-create-a-table/step%202.png)

<main id="notice" type='explain'>
   <h4>说明</h4>
   <ul>
   <li>复制行后，可选中某行并通过快捷键 Command + V / Ctrl + V 进行粘贴。</li>
   <li>页面底部的辅助编辑区域会显示所选中列的相关提示信息。</li>
   <li>基本信息和列为必填项，其它为选填项，填写基本信息和列后，可以直接提交并确认 SQL 新建表。</li>
   </ul>
</main>

### 步骤三：设置索引 

当表中包含大量数据，可以使用索引更快速的查询数据。索引是表中对某一列或多个列的值进行预排序的数据结构。通过使用索引，可以直接定位到符合条件的记录。

如下图所示，需指定以下信息：

![step 3](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/500.sql-development/700.database-objects/100.web-odc-table-objects/200.web-odc-create-a-table/step%203.png)

### 步骤四：设置约束

约束用于规定表中的数据规则。如果存在违反约束的数据行为，该行为会被约束终止。

![step 4](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/500.sql-development/700.database-objects/100.web-odc-table-objects/200.web-odc-create-a-table/step%204.png)

ODC 中支持设置的表级约束包括以下 4 种：

* **主键约束**：定义一个主键来唯一标识表中的每一行数据。主键约束可为一个字段或是一组字段，一张表中只能设置一个主键约束，且设置完成后不支持编辑。

* **唯一约束**：保证在一个字段或者一组字段里的数据在表中是唯一的，一张表中可设置多个唯一约束。

* **外键约束**：在两个表的数据之间建立连接（可为一列或多列），旨在保持关联表之间数据的一致性、完整性。设置完成后不支持新增和编辑。

* **检查约束**：在编辑数据库数据时，按照设置的检查规则进行校验，校验通过才允许数据修改操作。

### 步骤五：设置分区规则 

![step 5](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/500.sql-development/700.database-objects/100.web-odc-table-objects/200.web-odc-create-a-table/step%205.png)

当表中包含大量数据时，可以对表进行分区。表进行分区后，表中的数据会存放到多个表空间，每次查询数据时不会扫描整张表。

* OceanBase 中 MySQL 模式支持六种分区方法： **key** 、 **Hash** 、 **Range** 、 **Range Columns** 、 **List** 和 **List Columns** 。

* Oracle 模式支持三种分区方法： **List** 、 **Range** 和 **Hash** 。

### 步骤六：确认 SQL 

![step 6](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/500.sql-development/700.database-objects/100.web-odc-table-objects/200.web-odc-create-a-table/step%206.png)

单击 **提交** 后，在 SQL 确认页面查看语句，支持 **SQL 检查** 和 **格式化** 语句以方便查看。

语法格式如下：

```sql
CREATE TABLE table_name (column_name column_type, column_name column_type,.......);
```

参数说明：

| 参数   | 说明  |
|--------------|--------------|
| CREATE TABLE            | 用于创建给定名称的表，必须拥有表 CREATE 的权限。           |
| table_name              | 创建表的名称，表名称必须符合标识符命名规则。                 |
| column_name column_type | 指定数据表中每个列（字段）的名称和数据类型，如果创建多个列，需要用逗号隔开。 |

### 步骤七：完成新建表 

单击 **执行** ，完成新建表后，会在左侧导航栏的表列表中出现新建的 employee 表。

![step 7](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/420/900.database-objects/1.web-odc-table-objects/2.png)

<main id="notice" type='explain'>
   <h4>说明</h4>
   <p>在左侧导航栏的表列表中，单击表名右侧的更多图标，通过弹出的管理操作列表（包括 <strong>查看表结构</strong>、<strong>查看表数据</strong>、 <strong>导入</strong>、 <strong>导出</strong>、 <strong>下载</strong>、 <strong>模拟数据</strong>、<strong>打开 SQL 窗口</strong>、<strong>复制</strong>、<strong>删除</strong> 和 <strong>刷新</strong>），可快速管理和操作目标对象。表对象具体操作，请参见 <a href="../../../1350.feature-details.md">常用功能简介</a>。</p>
</main>

支持使用关键字 `SELECT` 查询新建的表数据。

语法格式：

```sql
SELECT
 column_name,
 column_name
FROM
 table_name [WHERE Clause] [LIMIT N] [ OFFSET M]
```

参数说明：

| 参数          | 说明|
|-------------|------------|
| SELECT      | SELECT 命令可以读取一条或者多条记录。 |
| column_name | 指定查列名称。 使用星号（\*）默认查询所有列信息。           |
| WHERE       | 条件语句。 |
| LIMIT       | 设定返回的记录数。  |
| OFFSET      | 指定 SELECT 语句开始查询的数据偏移量。 默认情况下偏移量为 0。 |

示例：

```sql
SELECT `emp_no`, `birthdate`, `name`, `gender` FROM `employee`;
```

![7.2](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/500.sql-development/700.database-objects/100.web-odc-table-objects/200.web-odc-create-a-table/7.2.png)

tab 新建逻辑库表

ODC V4.3.2 及之后的版本支持将多个（或单个）物理库配置成一个逻辑库并配置逻辑表，以查询和管理复杂、庞大的分库与分表。

<main id="notice" type='explain'>
   <h4>说明</h4>
   <p>如无逻辑库权限，您可以通过项目/工单中的 <strong>申请库权限</strong> 申请逻辑库权限。</p>
</main>

### 步骤一：指定基本信息 

1. 登录数据库并进入 SQL 开发窗口后，在左侧导航栏中单击 **表** 标签可查看表列表。在表列表的右上角，单击 **+** 以创建表对象。

   <img src="https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/432/500.sql-development/100.web-odc-table-objects/200.web-odc-create-a-table/logical1.png" width="900">

2. 在 **基本信息** 中，输入 **逻辑表表达式** 和逻辑表的 **描述**等信息。

   <img src="https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/432/500.sql-development/100.web-odc-table-objects/200.web-odc-create-a-table/logical2.png" width="900">

   <main id="notice" type='notice'>
      <h4>注意</h4>
      <ul><li>逻辑表表达式中须包含库名。例如：<code>odc_test.employee[00-09]</code>，其中 <code>odc_test</code> 为库名，<code>employee</code> 为表名，<code>[00-09]</code> 为共创建 10 张表。</li>
      <li>生成的逻辑表名默认为物理表名非序号部分的共同字符串。例如，物理表名分别为 <code>db.test_0</code>, <code>db.test_1</code>, <code>db.test_2</code>, <code>db.test_3</code>，则生成的逻辑表名为 <code>test</code>。逻辑表表达式为 <code>db.test_[0-3]</code>。具体请参见下表逻辑表表达式规则说明</a>。</li></ul>
   </main>
 
   逻辑表表达式规则说明：

<table>
    <tr>
        <td align="center"><strong>规则类型</strong></td>
        <td align="center"><strong>规则名称</strong></td>
        <td align="center"><strong>举例说明</strong></td>
    </tr>
    <tr>
        <td rowspan="5" style="width: 350px;"><strong>简单规则</strong></td>
        <td>自然序</td>
        <td><code>test_[0-7]</code>：创建 8 张表。</td>
    </tr>
    <tr>
        <td>自然对齐序</td>
        <td><ul><li><code>test_[00-07]</code>：创建 8 张表，表名两位对齐。</li><li><code>test_[000-007]</code>：创建 8 张表，表名三位对齐。</li><li><code>test_[0000-0007]</code>：创建 8 张表，表名四位对齐。</li></ul></td>
    </tr>
    <tr>
        <td>跳跃前缀自然（不前缀补 0）对齐序</td>
        <td><code>test_[0-8:2]</code>：2 为步长，创建 5 张表（<code>test_0</code>、<code>test_2</code>、<code>test_4</code>、<code>test_6</code>、<code>test_8</code>）。</td>
    </tr>
    <tr>
        <td>跳跃前缀长度补 0 对齐序</td>
        <td><code>test_[00-07:3]</code>：步长为 3，创建 3 张表（<code>test_00</code>、<code>test_03</code>、<code>test_06</code>） 。</td>
    </tr>
    <tr>
        <td>规则居中序</td>
        <td><code>test_[00-31]_t</code>：后缀影子表。</td>
    </tr>
    <tr>
        <td rowspan="3" style="width: 350px;"><strong>多级规则</strong></td>
        <td>日期类序</td>
        <td><code>test_[01-12]_[01-31]</code>：创建 12 个月，每个月 31 天的表，即 12*31 张表。</td>
    </tr>
    <tr>
        <td>跳跃二级序</td>
        <td><code>test_[01-12:2]_[01-31:2]</code>：创建单月（1,3,5,.....11），每个月奇数天的表 (1,3,5,.....31)，即 6*16 张表。</td>
    </tr>
    <tr>
        <td>按月份二级序</td>
        <td><code>alicom_billing_bill_[0000-0007].zw_add_month_[01-12]_[0000-0063/8]</code>：将 64 份后缀表平分到 12 个月。创建结果：<code>alicom_billing_bill_0000.zw_add_month_[01-12]_[0000-0007]</code>、<code>alicom_billing_bill_0000.zw_add_month_[01-12]_[0008-0015]....alicom_billing_bill_0007.zw_add_month_[01-12]_[0056-0063]</code>。</td>
    </tr>
    <tr>
        <td rowspan="2" style="width: 350px;"><strong>数据库及联表规则</strong></td>
        <td>相同名称规则</td>
        <td><code>db_[00-31].test</code>：在 <code>db_00</code> 到 <code>db_31</code> 数据库下都定义 <code>test</code> 表。</td>
    </tr>
    <tr>
        <td>平均分配规则</td>
        <td><code>db_[00-31].test[0000-1023]</code>：在 <code>db_00</code> 到 <code>db_31</code> 数据库下一共存在 1024 张表。</code></td>
    </tr>
    <tr>
        <td rowspan="2" style="width: 350px;"><strong>枚举规则</strong></td>
        <td>简单枚举</td>
        <td><code>test_[1,3,6,8,9]</code>：在指定的分库中创建 5 张表。</td>
    </tr>
    <tr>
        <td>复杂枚举规则</td>
        <td>通过多个表达式，将表平均分配到指定的分库中：<code>test_[1,3,6,8,9]</code>,<code>test_[2,4,5,7,10]</code></td>
    </tr>
    <tr>
        <td rowspan="3" style="width: 350px;"><strong>数据库及枚举</strong></td>
        <td>数据库下创建相同的规则</td>
        <td><code>db_[00-31].test_[[00-31]]</code>：在 32 个数据库下，各创建 <code>test_[00-31]</code> 的表。</td>
    </tr>
    <tr>
        <td>数据库下枚举</td>
        <td><code>db_01.test_[1,2,4,6,7],db_02.test_[2,3,5,7,9],db_03.test_[1,4,6,7,9]</code>：在 3 个数据库下各创建 5 张表。</code></td>
    </tr>
    <tr>
        <td>数据库下不均等表</td>
        <td><code>db_01.test_[1-7],db_02.test_[10-15]</code>：在数据库 <code>db_01</code> 下创建 7 张表，在数据库 <code>db_02</code> 下创建 6 张表。</code></td>
    </tr>
</table>

### 步骤二：设置列 

如下图所示，添加一列时需指定以下信息：

<img src="https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/432/500.sql-development/100.web-odc-table-objects/200.web-odc-create-a-table/logical3.png" width="900">

<main id="notice" type='explain'>
   <h4>说明</h4>
   <ul>
   <li>复制行后，可选中某行并通过快捷键 Command + V / Ctrl + V 进行粘贴。</li>
   <li>页面底部的辅助编辑区域会显示所选中列的相关提示信息。</li>
   <li>基本信息和列为必填项，其它为选填项，填写基本信息和列后，可以直接提交并确认 SQL 新建表。</li>
   </ul>
</main>

### 步骤三：设置索引 

当表中包含大量数据，可以使用索引更快速的查询数据。索引是表中对某一列或多个列的值进行预排序的数据结构。通过使用索引，可以直接定位到符合条件的记录。

如下图所示，需指定以下信息：

<img src="https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/432/500.sql-development/100.web-odc-table-objects/200.web-odc-create-a-table/logical4.png" width="900">

### 步骤四：设置约束

约束用于规定表中的数据规则。如果存在违反约束的数据行为，该行为会被约束终止。

<img src="https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/432/500.sql-development/100.web-odc-table-objects/200.web-odc-create-a-table/logical5.png" width="900">

ODC 中支持设置的表级约束包括以下 4 种：

* **主键约束**：定义一个主键来唯一标识表中的每一行数据。主键约束可为一个字段或是一组字段，一张表中只能设置一个主键约束，且设置完成后不支持编辑。

* **唯一约束**：保证在一个字段或者一组字段里的数据在表中是唯一的，一张表中可设置多个唯一约束。

* **外键约束**：在两个表的数据之间建立连接（可为一列或多列），旨在保持关联表之间数据的一致性、完整性。设置完成后不支持新增和编辑。

* **检查约束**：在编辑数据库数据时，按照设置的检查规则进行校验，校验通过才允许数据修改操作。

### 步骤五：设置分区规则 

<img src="https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/432/500.sql-development/100.web-odc-table-objects/200.web-odc-create-a-table/logical6.png" width="900">

当表中包含大量数据时，可以对表进行分区。表进行分区后，表中的数据会存放到多个表空间，每次查询数据时不会扫描整张表。

* OceanBase 中 MySQL 模式支持六种分区方法： **key** 、 **Hash** 、 **Range** 、 **Range Columns** 、 **List** 和 **List Columns** 。

* Oracle 模式支持三种分区方法： **List** 、 **Range** 和 **Hash** 。

### 步骤六：确认 SQL 

<img src="https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/432/500.sql-development/100.web-odc-table-objects/200.web-odc-create-a-table/logical7.png" width="900">

单击 **提交** 后，在 SQL 确认页面查看语句，支持 **格式化** 语句以方便查看。

语法格式如下：

```sql
CREATE TABLE table_name (column_name column_type, column_name column_type,.......);
```

参数说明：

| 参数   | 说明  |
|--------------|--------------|
| CREATE TABLE            | 用于创建给定名称的表，必须拥有表 CREATE 的权限。           |
| table_name              | 创建表的名称，表名称必须符合标识符命名规则。                 |
| column_name column_type | 指定数据表中每个列（字段）的名称和数据类型，如果创建多个列，需要用逗号隔开。 |

### 步骤七：完成新建表 

单击 **执行** ，完成新建表后，会在左侧导航栏的表列表中出现新建的 employee 表。

:::

## 相关信息 

* [新建视图](../200.web-odc-view-objects/200.web-odc-create-a-view.md)
* [新建函数](../300.web-odc-function-objects/200.web-odc-create-a-function.md)
* [新建存储过程](../400.web-odc-stored-procedure-objects/200.web-odc-create-a-stored-procedure.md)
* [新建序列](../500.web-odc-sequence-objects/200.web-odc-create-a-sequence.md)
* [新建程序包](../600.web-odc-package-objects/200.web-odc-create-a-program-package.md)
* [新建触发器](../700.web-odc-trigger-objects/200.web-odc-create-a-trigger.md)
* [新建类型](../800.web-odc-type-objects/200.web-odc-create-a-type.md)
* [新建同义词](../900.web-odc-synonym-objects/200.web-odc-create-a-synonym.md)