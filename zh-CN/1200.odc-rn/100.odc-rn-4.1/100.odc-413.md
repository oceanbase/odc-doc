# ODC V4.1.3

## ODC V4.1.3

本次 5 月发版的 OceanBase 开发者中心（OceanBase Developer Center，ODC）V4.1.3 主要适配 OceanBase V4.1.0 数据库版本、升级 OceanBase 导数工具组件版本至 V4.2.3，并升级数据库驱动 oceanbase-client 版本至 V2.4.3。

### 版本信息

* **当前版本：** V4.1.3

* **前置版本：** V4.1.2

* **发版时间：** 2023 年 05 月 24 日

* **支持的升级路径：** 对于 ODC V2.0.0 及之后版本，均可直接升级至本版本。

### 支持的 OceanBase 数据库版本

OceanBase 开发者中心 V4.1.3 版本支持下述版本的 OceanBase 数据库。

* ODC 通用功能支持 OceanBase 数据库版本

  * OceanBase V1.4.x（主流版 V1.4.7）
  
  * OceanBase V2.0.x
  
  * OceanBase V2.1.x
  
  * OceanBase V2.2.x（主流版 V2.2.7）
  
  * OceanBase V3.1.x（主流版 V3.1.2）
  
  * OceanBase V3.2.x（主流版 V3.2.4）

  * OceanBase V4.0.0

  * OceanBase V4.1.0
  
  * OceanBase 社区版

* ODC PL 功能支持 OceanBase 数据库版本

  * PL 对象（函数/存储过程/程序包）编译、PL 对象（函数/存储过程）调试和匿名块调试：支持 V2.2.7、V3.0.x 及之后版本，推荐 OceanBase V3.2.3 BP4 及之后版本体验更友好的调试能力。
  
  * PL 对象（函数/存储过程/程序包）运行和匿名块运行：支持 V2.0.x 及之后版本。

### 功能变更

* 适配 OceanBase V4.1.0 数据库版本。 

### 依赖库升级

* 升级 OceanBase 导数工具组件版本至 V4.2.3。

* 升级数据库驱动 oceanbase-client 版本至 V2.4.3。

### 问题修复

* 管控协同

  * 修复越权添加他人账号的资源管理权限的问题。

  * 修复使用 system_admin 角色创建其他角色时报错权限不足的问题。

  * 修复查询任务状态接口存在水平越权的问题。

  * 修复编辑角色时存在垂直越权错误的问题。

  * 修复任务无法手动终止，终止成功后依然会继续运行的问题。

* SQL 执行

  * 修复无法执行包含 language 标识符的 SQL 语句的问题。

  * 修复包含 Hint 的 SQL 语句时出错导致 Hint 失效的问题。

  * 修复 Oracle 模式下，编辑 SQL 语句时补全表名功能不可用的问题。

  * 修复创建的 PL 语句中包含 WHILE-LOOP 时，分句结尾多出分号的问题。

  * 修复执行创建的大规模 PL 语句时会 hang 住的问题。

* 导入导出

  * 修复启动任务失败且无报错日志的问题。

  * 修复导出数据库对象列表中无公共同义词的问题。

  * 修复导出程序包中存在 ODC 内建的程序包的问题。

  * 修复 ODC 无法导出临时表的问题。

* 数据库变更

  * 修复创建数据库变更时，设置 **执行超时时间** 无效的问题。

* 连接管理

  * 修复创建连接时，输入数据库用户名和数据库密码后单击 **测试连接** 无法识别云服务的连接地址的问题。

* 数据库对象

  * 修复 MySQL 模式下，无法查看 `mysql` 数据库中内置的表对象详情的问题。

  * 修复执行 PL 对象时报错超时，修改会话变量同样无效的问题。

* 安全加固

  * 解决官网体验站 odc_back_url 任意 URL 跳转。

  * 加固 ODC `admin` 账户初始密码，支持通过环境变量设置初始密码。

  * 升级 fastjson 版本至 1.2.83_noneautotype。

### 已知问题

* 客户端版 ODC 不支持安装在中文目录名中。

* 导出包含虚拟列的表时，导出的数据文件和内容显示异常。

* Web 版 ODC 中，结构或数据的导入量上限为 2GB，超限文件无法上传。

* Web 版 ODC 中，结构或数据的导出量上限为 2GB，超限会导致最终导出数据不完整。

* 导出任务详情中，导出对象的数据总记录数依赖 OceanBase 数据库视图，并非精准值。

* 需设置 `ob_enable_trace_log` 参数为 `on`，否则只显示首次执行的 SQL 的执行计划。

## ODC V4.1.3 BP

本次 6 月发版的 OceanBase 开发者中心（OceanBase Developer Center，ODC）V4.1.3 BP 旨在修复用户反馈的部分缺陷问题。

### 版本信息

* **当前版本：** V4.1.3 BP

* **前置版本：** V4.1.3

* **发版时间：** 2023 年 06 月 19 日

* **支持的升级路径：** 对于 ODC V2.0.0 及之后版本，均可直接升级至本版本。

### 支持的 OceanBase 数据库版本

OceanBase 开发者中心 V4.1.3 BP 版本支持下述版本的 OceanBase 数据库。

* ODC 通用功能支持 OceanBase 数据库版本

  * OceanBase V1.4.x（主流版 V1.4.7）
  
  * OceanBase V2.0.x
  
  * OceanBase V2.1.x
  
  * OceanBase V2.2.x（主流版 V2.2.7）
  
  * OceanBase V3.1.x（主流版 V3.1.2）
  
  * OceanBase V3.2.x（主流版 V3.2.4）

  * OceanBase V4.0.0

  * OceanBase V4.1.0
  
  * OceanBase 社区版

* ODC PL 功能支持 OceanBase 数据库版本

  * PL 对象（函数/存储过程/程序包）编译、PL 对象（函数/存储过程）调试和匿名块调试：支持 V2.2.7、V3.0.x 及之后版本，推荐 OceanBase V3.2.3 BP4 及之后版本体验更友好的调试能力。
  
  * PL 对象（函数/存储过程/程序包）运行和匿名块运行：支持 V2.0.x 及之后版本。


### 问题修复

* PL 调试

  * 修复调试 PL 跳入自身 `IS` 中定义的 PL 报错的问题。

  * 修复调试包含 in out 型参数的 PL 时，如果传入 NULL 参数值，实际传入为 0 的问题。

* SQL 执行

  * 修复 OceanBase Oracle 模式下执行 `SELECT DISTINCT` 语句时，结果集中可能会包含重复数据的问题。

  * 修复 ODC 中设置 SQL_MODE 系统变量，重新打开连接后不生效的问题。

  * 修复 ODC 主动执行 show trace where keyvalue 语句时，由于部分 OceanBase 版本不支持导致告警的问题。

* 任务中心

  * 修复执行分区计划任务时，定时任务中断导致剩余任务不执行的问题。

  * 修复查看 SQL 计划任务详情存在垂直越权漏洞的问题。

* 数据库变更

  * 修复执行数据库变更时，任务未执行完成情况下存在重试的问题。

* 数据库对象

  * 修复查看结果集中的大字段文本时，显示文本无换行的问题。

  * 修复在 ODC 表属性页签中删除列默认值后，默认值未生效的问题。

  * 修复表中包含隐藏列时，编辑表对象会生成一条修改列名的 SQL 语句的问题。

  * 修复 OceanBase MySQL 模式下，表中插入时间类型非法值时，ODC 与 OBClient 返回结果不同的问题。

  * 修复 OceanBase Oracle 模式下，添加表外键约束时，选择删除时（ON DELETE）不做任何操作（NO ACTION），生成的 DDL 拼接了 ON DELETE NO ACTION，语法错误的问题。