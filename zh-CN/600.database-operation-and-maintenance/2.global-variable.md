# 全局变量管理

## 背景信息

全局变量可以理解为参数变量，用于管理作用域为全局的数据库变量，以及全局控制数据库的行为。

在 ODC 全局变量页面可以查询和修改连接到当前数据源下所有数据库变量信息。

## 查询全局变量

示例：在 SQL 开发窗口中，查询数据源 mysql420 下数据库变量。


1. 在 SQL 开发窗口，单击 **运维管理** > **全局变量**。

    ![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/420/database-operation-and-maintenance/global-variable/1.png)

2. 选择数据源 mysql420，并单击 **确定**。

    ![2](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/420/database-operation-and-maintenance/global-variable/2.png)

3. 在 **全局变量** 页面中，可以查询数据源 mysql420 下所有数据库变量信息。

    ![3](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/420/database-operation-and-maintenance/global-variable/3.png)

## 编辑全局变量

示例：在 SQL 开发窗口中，修改数据源 mysql420 下数据库变量 connect_timeout 的值。

| 信息项 | 示例值 |
| ------ | ------ |
|所属数据源|mysql420 |
|数据库变量|connect_timeout|

1. 在搜索框中搜索数据库 connect_timeout。

    ![4](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/420/database-operation-and-maintenance/global-variable/4.png)

2. 在会话属性列表中，单击变量名 connect_timeout 后单击编辑按钮，修改该变量值为 20。

    ![5](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/420/database-operation-and-maintenance/global-variable/5.png)

    <main id="notice" type='explain'>
      <h4>说明</h4>
      <ul>
      <li>数据库实例共享全局变量。这意味着不同用户共享这些全局变量，且数据库会保存用户对全局变量做出的更改，断开连接并再次进入数据库时，更改依旧有效。</li>
      <li>ODC 中共享 Session，相同连接只有一个 Session。ODC V2.3.2 后在 Oracle 模式下自动提交默认设置为关，所以用户需要手动提交事务。用户可以修改变量 autocommit 的值进行设置。</li>
      <li> 事务手动提交模式下，需要设置 ob_trx_idle_timeout 大于等于设置的 SQL 查询超时时间，否则一个事务内两个 SQL 之间的执行间隔超过 ob_trx_idle_timeout 设置的时间，连接会终止。同时需要注意 ob_trx_idle_timeout 设置过大会导致该会话占用内存无法及时释放，需谨慎设置。</li>
      </ul>
    </main>

3. 在 **SQL 确认** 弹窗中，修改和确认 SQL 语句后，单击 **执行**。

    ![6](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/420/database-operation-and-maintenance/global-variable/6.png)

4. 在会话属性列表中，可查看修改后的 connect_timeout 变量值。

    ![7](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/420/database-operation-and-maintenance/global-variable/7.png)

## 相关文档

- [会话管理](../600.database-operation-and-maintenance/1.session-management.md)

- [回收站管理](../600.database-operation-and-maintenance/3.recycle-bin.md)