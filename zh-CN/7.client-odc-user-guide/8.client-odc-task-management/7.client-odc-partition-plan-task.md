# 分区计划任务

## 背景信息

OceanBase 开发者中心（OceanBase Developer Center，ODC）支持用户向公共资源管控台管理员申请分区计划的权限。

用户在 **任务中心** 创建分区计划任务后，管理员会在任务中心的任务列表中审批任务，申请权限的用户可以在任务中心的任务列表中查看任务信息和审批状态。

## 新建分区计划任务

1. 进入目标数据库连接后，单击顶部导航栏中的 **任务中心** 标签。

   ![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/413/export0.png)

2. 在弹出的任务中心面板中，单击 **分区计划** 右侧的 **+** 图标，弹出新建分区计划任务面板。

   ![2](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/410/client/task/partitioning%20plan/2.png)

3. 在 **新建分区计划** 面板中，输入以下信息。

   ![3](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/410/client/task/partitioning%20plan/3.png)

   | 信息项 | 说明   |
   |---------|--------------------|
   | 所属连接    | 选择创建分区计划所属连接。默认为当前连接。  |
   | 分区策略    | 搜索和勾选所属库中的 Range 分区表，并编辑对应的分区策略。 <ul><li> 勾选 **设置分区计划** 右侧的 仅显示未设置的表时，支持过滤未设置的表。 </li><li> 勾选 Range 分区表时，支持批量设置分区策略。 </li><li> 在 **分区策略** 项下，单击编辑图标，支持编辑预创建分区数量、分区间隔、保留时长和命名规则等。</li></ul> |
   | 备注（可选）  | 输入申请原因。  |

4. 单击 **提交** ，完成任务申请。

   > **说明**  
   > 任务申请创建完成后，任务会自动匹配公共资源管控台中默认的申请分区计划任务流程。  
   > 有关任务流程更多详情，请参见 [任务流程管理](../../6.web-odc-user-guide/4.web-odc-public-resource-management/4.web-odc-task-process.md)。
 


## 查看分区计划任务

### 任务列表

> **说明**  
> 任务列表会显示最近 48 小时内的任务。

![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/410/client/task/partitioning%20plan/1.png)

**分区计划** 任务列表中包含如下信息：

| 信息项 | 说明   |
|---------|----------------|
| 任务编号    | 显示任务编号。  |
| 任务类型    | 显示新建任务时指定的任务类型。    |
| 所属连接    | 显示目标任务所在的数据库连接名称。 单击筛选图标![筛选](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0583667361/p352180.jpg)，可筛选所属连接。    |
| 所属数据库   | 显示目标任务所在的数据库。单击搜索图标![搜索](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5526247461/p416691.jpg)，可搜索和筛选所属数据库。   |
| 创建人     | 创建任务的用户。 单击搜索图标![搜索](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5526247461/p416691.jpg)，可搜索和筛选创建人。    |
| 创建时间    | 显示该任务生成的具体日期和时间。    |
| 任务状态    | 显示任务的当前状态（不同状态下提供的管理操作不同）。  |
| 操作      | 提供 **查看** 、 **通过/拒绝**  和  **终止** 等任务管理操作。 <ul><li> 查看：单击该按钮进入任务详情页面以查看目标任务信息。 </li><li> 通过/拒绝：单击该按钮审批任务。  </li><li> 终止：任务运行中时，单击该按钮终止任务。</li></ul> |

### **任务信息**

1. 在 **任务中心** > **分区计划** 的任务列表页签中，单击任务列表操作列中的 **查看** 按钮弹出目标任务的任务详情面板。


2. 在 **任务详情** 面板中，单击 **任务信息** 页签查看任务基本信息和设置信息。

   | 信息项 | 说明   |
   |---------|---------------------------------------------------|
   | 任务基本信息  | 显示 **任务状态** 、 **任务编号** 、 **任务类型、所属连接**、 **备注、创建人** 和 **创建时间** 等信息。 |
   | 任务设置信息  | 显示创建分区计划任务时所选择的 Range 分区表的分区策略信息。|

3. 在任务信息面板右下角，单击 **再次发起** ，可以重新发起任务。

### **任务流程** 

1. 在 **任务详情面板** 中，单击 **任务流程** 页签查看 **发起任务状态** 、 **审批状态** 、 **执行状态** 和 **完成结果** 等信息。


2. 在面板右下角，单击 **再次发起** ，可重新发起任务。

### 关联记录

1. 在 **任务详情面板** 中，单击 **关联记录** 页签查看 **任务编号** 、 **所属库** 、 **创建时间** 、 **任务状态** 和 **查看** 操作等信息。

2. 在面板右下角，单击 **再次发起** ，可重新发起任务。

### 任务日志


1. 在 **任务详情面板** 中，单击 **任务日志** 标签查看任务的全部日志和告警日志。


   | 信息项  | 说明     |
   |------|-----------------------------|
   | 全部日志 | 全部日志显示任务的 **INFO** 、 **ERROR** 和 **WARN** 日志等全量信息。 单击 **查找** 、 **下载** 和 **复制** 按钮，可查找信息、下载或复制全部日志信息。        |
   | 告警日志 | 告警日志单独显示任务的 **ERROR** 和 **WARN** 日志。当任务失败时，可通过告警日志查看错误信息。 单击 **查找** 、 **下载** 和 **复制** 按钮，可查找信息、下载或复制告警日志信息。 |

2. 单击 **再次发起** ，可重新发起任务。


## 相关信息

* [新建分区计划](../../7.client-odc-user-guide/5.client-odc-use-tools/5.client-odc-partition-plan.md)