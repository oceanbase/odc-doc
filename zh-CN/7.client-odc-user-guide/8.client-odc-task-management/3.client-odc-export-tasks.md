导出任务 
=========================

在 OceanBase 开发者中心（OceanBase Developer Center，ODC）创建批量导出和单表导出任务后，可在 **任务中心** 面板的 **导出** 页签新建和查看任务。



任务列表 
-------------------------

> **说明**<br>
> 任务列表会显示最近 48 小时内的任务。
> 最大支持 3 个导出任务并行运行，后续任务在队列中等待运行。

进入目标数据库连接后，单击顶部导航栏中的 **任务** **中心** 标签弹出任务中心面板，在面板中单击 **导出** 页签显示任务列表。

![Image 454](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9158337461/p263362.png)

进入导出任务页签后，列表中会显示以下信息并且支持筛选和排序：


|  信息项  |                                                                                                                                                                                                               说明                                                                                                                                                                                                                |
|-------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 任务编号  | 导出任务编号。                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 任务类型  | 显示新建任务时指定的任务类型（导入、导出、模拟数据或数据库变更）。                                                                                                                                                                                                                                                                                                                                                                                               |
| 所属连接  | 显示目标任务所在的数据库连接名称。 单击筛选图标![筛选](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0583667361/p352180.jpg)，可筛选所属连接。                                                                                                                                                                                                                                                                                     |
| 所属数据库 | 显示目标任务所在的数据库。 单击搜索图标![搜索](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5526247461/p416691.jpg)，可搜索和筛选所属数据库。                                                                                                                                                                                                                                                                                        |
| 创建人   | 创建导出任务的用户。 单击搜索图标![搜索](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5526247461/p416691.jpg)，可搜索和筛选创建人。                                                                                                                                                                                                                                                                                          |
| 创建时间  | 显示该任务生成的具体日期和时间。                                                                                                                                                                                                                                                                                                                                                                                                                |
| 任务状态  | 显示任务的当前状态（不同状态下提供的管理操作不同）。                                                                                                                                                                                                                                                                                                                                                                                                      |
| 操作    | 提供 **查看** 、 **通过/拒绝** 、 **终止** 和 **下载** 等任务管理操作。 <li> 查看：单击该按钮进入任务详情页面以查看目标任务的 **任务详情** 和 **任务日志**。</li>   <li> 通过/拒绝：单击该按钮审批执行中的任务。</li>   <li> 终止：任务运行中时，单击该按钮终止任务。</li>   <li> 下载：任务成功时，单击该按钮下载导出文件至本地。</li>     |



新建导出任务 
---------------------------

![任务-导入-新建导入](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6655018461/p415562.png)

1. 登录 ODC 进入目标连接后，单击顶部导航栏中的 **任务中心** ，在弹出的任务面板中，单击 **全部任务** \> **导出** \> **新建导出** ，创建导出任务。

   

2. 在 **新建导出** 面板中，输入以下信息。

   

   |    信息项     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        说明                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
   |------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | 所属连接       | 显示目标任务所在的数据库连接名称。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
   | 所属库        | 选择需变更的数据库。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
   | 导出内容       | 当导出格式为 ZIP 压缩文件时需指定该项。 ODC 目前支持 **仅导出数据** 、 **仅导出结构** 和 **导出结构和内容** 三种方式 **。**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   | 数据格式       | 选择 **数据格式** 。 ODC 目前支持将数据导出为 **CSV 格式** 和 **SQL 格式** 。 当 **导出内容** 为 **仅导出结构** 时，只支持导出数据为 SQL 格式。 具体格式信息，请参见 [导出导入格式](../5.client-odc-use-tools/1.client-odc-data-export-and-import/2.client-odc-export-and-import-formats.md)。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | 文件编码       | 选择 **文件编码** 。 ODC 目前支持 **ASCII** 、 **ISO-8859-1** 、 **GB2312** 、 **GBK** 、 **GB18030** 、 **Unicode (UTF-8)** 、 **Unicode (UTF-16)** 、 **Unicode (UTF-32)** 和 **BIG5** 等编码格式，您需在 **文件编码** 下拉框中选择所需的编码格式。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   | 导出对象       | 选择 **导出对象** 。 在 **导出对象** 标签下的表格中会显示当前表的 **对象名称** 和 **对象类型** 信息。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   | 导出数据设置     | 当 **导出内容** 为仅导出结构时无需进行导出数据设置，该项包含以下设置项： <br> a. **使用全局快照** ：勾选该项后 ODC 将导出全局中指定表的最新快照点中的数据，勾选该项可以保证全局数据的统一性。 <br>   b. **不导出的数据类型** ：单击 **导出数据设置** 标签后的 **高级** 按钮，在弹出的列表中可指定该项。您可以通过该项指定导出数据时要跳过的数据类型。MySQL 和 Oracle 下可跳过的类型不同，支持多选。<br>   c. 指定 CSV 格式信息。当 **数据格式** 为 CSV 格式且 **导出内容** 不为仅导出结构时，单击 **导出数据设置** 标签后的 **高级** 按钮，在弹出的列表中可指定以下信息：<br> - **包含列头** ：默认勾选，选择导出数据为 CSV 格式时是否包含列头。<br> - **空字符串转为空值** ：默认勾选，选择导出数据为 CSV 格式时是否将表中的空字符串转换为空值 \\N。<br> - **字段分隔符**：设置字段间的分隔符。支持选择 **,** （逗号）、 **;** （分号）和 **:** （冒号）作为字段分割符，同时支持自定义一个字符长度的字符作为分隔符。<br> - **文本识别符** （设置文本内容的识别符，支持选择 **'** （单引号）和 **"** （双引号）作为文本识别符）。<br> - **换行符号** （设置换行符，支持选择 **\\n** 、 **\\r** 和 **\\r\\n** 作为换行符。     |
   | sys 租户账号设置 | 进行 **sys 租户账号配置**。<br> 在该项下选择是否 **使用 sys 租户账号提升导出速度** 。勾选后在弹出的 **账号** 和 **密码** 文本框中填写 sys 租户下的用户名和对应的密码。设置完成后会使用 sys 租户的权限进行导出，可提升导出的速度（通过访问 sys 租户下的视图信息得到最优的数据路由策略）。 <br> **注意** <br>  - **sys 租户账号和密码** 为集群租户下用户的账号和密码 (账号请勿填入"@sys#集群")。如图所示： <br>![sys 租户账号配置](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9555336361/p348256.png)<br>   - 导出时如勾选表和视图之外的其它对象，须配置该项使用 sys 租户账号进行导出。<br>   - 如未配置 sys租户账号，会导致导入导出缺注释和索引。                                                                                                                                                                                                                                                                                                                                                                                                          |

   

3. 单击 **导出** ，完成新建导出任务。

   




查看导出任务 
---------------------------

### 任务详情 

单击操作列中的 **查看** 按钮弹出目标任务的任务详情面板，在面板的右上角单击 **任务信息** 标签查看任务基本信息、导出文件信息和导出对象信息。


|  信息项   |                                                             说明                                                              |
|--------|-----------------------------------------------------------------------------------------------------------------------------|
| 任务基本信息 | 显示 **任务编号** 、 **连接名** 、 **模式名** 、 **任务类型** 、 **创建时间** 、 **重试次数** 和 **重试时间** 等信息。                                            |
| 导出文件信息 | 显示创建导出任务时您选择的 **导出内容** 、 **数据格式** 、 **文件编码** 、 **导出数据设置** 、 **导出结构设置** **、** **任务错误处理** 和 **sys 租户账号配置** 等信息。               |
| 导出对象信息 | 显示该任务中您选择的对象在导出或导出数据时的完成情况，包括  **对象名称** 、 **对象类型** 、 **结构处理状态** 、 **数据总记录数** 、 **数据已处理数** 和 **数据处理状态** 等信息。 |



### 任务流程 

单击操作列中的 **查看** 按钮弹出目标任务的任务详情面板，在面板的右上角单击 **任务流程** 标签查看 **发起任务** 、 **审批** 和 **执行** 状态等信息。

### 任务日志 

单击操作列中的 **查看** 按钮弹出目标任务的任务详情面板，在面板的右上角单击 **任务日志** 标签查看任务的全部日志和告警日志。


| 信息项  |                                     说明                                      |
|------|-----------------------------------------------------------------------------|
| 全部日志 | 显示任务的 **INFO** 、 **ERROR** 和 **WARN** 日志等全量信息。                              |
| 告警日志 | 告警日志单独显示任务的 **ERROR** 和 **WARN** 日志。 当任务失败时，可查看告警日志以获得错误信息。 |


同时，工具栏提供了以下功能键：
| 功能  |                            说明                             |
|------|-----------------------------------------------------------|
| 查找 | 单击该按钮查找日志信息。        |
| 下载 | 单击该按钮下载日志信息。 |
| 复制 | 单击该按钮复制日志信息。 |
