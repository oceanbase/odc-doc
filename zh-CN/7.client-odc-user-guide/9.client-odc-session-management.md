会话管理 
=========================

应用与数据库的连接被称为一个会话，在 OceanBase 开发者中心（OceanBase Developer Center，ODC）会话管理页面您可以查看连接到当前数据库所有会话的详细信息。同时在会话属性页面 ODC 提供了可视化界面使您可以清晰直观的查看和修改当前数据库支持的会话变量和全局变量。

进入 ODC 对应的数据库连接后，单击页面上方导航栏的 **会话** 按钮，可选择进入 **会话属性** 或 **会话管理** 页面。

![Image 186](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4639171361/p241371.png)
会话属性 
-------------------------

![会话管理2](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4639171361/p203464.png)

会话属性即数据库变量，OceanBase 中有会话变量和全局变量：

* **会话变量** ：当客户端连接到数据库后，数据库会复制全局变量以自动生成会话变量。会话变量的修改只对当前会话生效。

* **全局变量** ：数据库实例共享全局变量。这意味着不同用户共享这些全局变量，且数据库会保存您对全局变量做出的更改，断开连接并再次进入数据库时，更改依旧有效。



> **说明** <br>
> <li> 当前版本的 ODC 中不支持编辑全局变量，可对会话变量进行修改。</li>
> <li> ODC 中共享 Session，相同连接只有一个 Session。ODC V2.3.2 后在 Oracle 模式下自动提交默认设置为关，所以您需要手动提交事务。您可以修改变量 autocommit 的值进行设置。</li>
> <li> 事务手动提交模式下，需要设置 ob_trx_idle_timeout 大于等于设置的 SQL 查询超时时间，否则一个事务内两个 SQL 之间的执行间隔超过 ob_trx_idle_timeout 设置的时间，连接会终止。同时需要注意 ob_trx_idle_timeout 设置过大会导致该会话占用内存无法及时释放，需谨慎设置。</li>

  




ODC 提供了可视化界面使您可以清晰直观的查看与修改当前数据库支持的变量。对于变量值的修改：

* 针对会话变量，当前版本 ODC 区分了查看态和编辑态，选中需修改的变量后，单击工具栏中的编辑按钮以进入编辑弹窗进行修改。编辑完成后单击 **确定** 按钮，在弹出的 **SQL 确认** 页面中单击 **执行** ，修改生效。

  

* 如变量的值为字符或数字类型，可在变量编辑页面中直接输入修改值。

  

* 如变量的值为枚举类型，ODC 会在变量值的编辑框中列举出该变量支持的值的集合，可在不使用准确记忆变量名和值的情况下通过可视化界面完成修改，此方式可降低用户记忆变量的成本并提高变量修改的效率。

  




会话管理 
-------------------------

与当前数据库的连接被称为一个会话，在会话管理页面您可以查看连接到当前数据库的所有会话和以下会话信息：


|  会话信息   |                        说明                        |
|---------|--------------------------------------------------|
| 会话 ID   | 展示当前会话的 ID，是会话的唯一标识。                             |
| 用户      | 会话登录使用的数据库用户名。                                   |
| 来源      | 发起会话的地址。                                         |
| 数据库名    | 当前会话访问的数据库名称。                                    |
| 状态      | 展示当期会话的状态，有 **SLEEP** （休眠）和 **ACTIVE** （活跃）两种状态。 |
| 命令      | 会话当前执行的命令类型。                                     |
| 执行时间（s） | 会话当前执行 SQL 所花的时间。                                |
| SQL     | 会话当前执行 SQL 的具体内容。                                |
| OBProxy | 会话访问的代理地址。                                       |


![管理会话](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1238140161/p203463.png)

会话管理页面的导航栏中提供了以下功能键供您管理会话：

* **刷新** ：刷新会话列表。

* **关闭会话** ：终止当前会话。

* **关闭会话当前查询** ：终止当前会话正在进行的 SQL 执行进程。



