创建连接 
=========================

登录 OceanBase 开发者中心（OceanBase Developer Center，ODC）进入 ODC 首页后，可在连接的右上角单击 **新建连接** 按钮进行连接配置操作，新建连接完成后，当再次登录 ODC 时，可在首页的连接列表中查看已保存的数据库连接。

![Image 907](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5498018461/p313320.png)


> **注意**<br>
> <li> 自 ODC V2.3.0 之后版本，导入导出功能需在创建连接的高级配置中设置 root@sys 用户，否则会提示无法使用导入导出功能，因自该版本起，导入导出功能查询视图信息时依赖 root@sys 账号。</li>
> <li> 分区信息查看同样依赖 root@sys 账号，因此亦需在创建连接的高级配置中设置 root@sys 用户。</li>
> <li> Oracle 连接为共享 Session 设计，当主动触发提交或回滚操作，或通过产品功能创建、修改、删除数据库对象和执行 DDL 语句被动触发提交操作时，事务的提交或回滚会在所有窗口生效。首次进入 Oracle 连接时，将显示相关提示。</li>
> <li> 事务手动提交模式下，需设置 `ob_trx_idle_timeout` 大于等于设置的 SQL 查询超时时间，否则一个事务内两个 SQL 之间的执行间隔超过 `ob_trx_idle_timeout` 设置的时间，连接会终止。同时需注意 `ob_trx_idle_timeout` 设置过大会导致该会话占用内存无法及时释放，需谨慎设置。</li>

创建连接的操作步骤如下所示:

1. 进入 ODC 后，单击页面中的 **创建连接** 按钮。

   

2. 在创建连接页签需填写或选择以下信息，如已拥有 OceanBase 数据库连接串，则以下信息均可从连接串中直接获取（mysql -h **主机名** -P **端口号** -u **数据库用户名@租户名** # **集群名** -D **默认数据库** -p ' **数据库密码** '）或直接使用页签中提供的智能解析工具进行填充：

   

   |     信息项     |                                                                                                                                                                                                                                                                                                                        说明                                                                                                                                                                                                                                                                                                                        |
   |-------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | 数据库类型       | 选择 **物理库** 或 **逻辑库** 。<br> - 物理库：普通数据库。<br> - 逻辑库：ODP (Sharding)。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   | 所属区域        | 选择连接示例所在的区域 **公有云** （阿里云上的数据库实例） 或 **独立部署/专有云** （在自己环境中搭建的数据库实例）。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
   | 连接模式        | 选择 **MySQL** 或 **Oracle** 。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   | 连接名称        | 指定该连接的名称。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
   | 设置标签        | 通过标签，可为连接增加提示说明类信息。 单击 **连接名称** 文本框后的 **设置标签** 按钮为当前连接指定标签，在弹出的下拉列表中可进行设置标签和管理标签的操作：<br> - 设置标签：在下拉列表中选择目标标签完成设置。若列表为空请先新建标签。   <br> - 管理标签：单击列表最下方的 **新建标签** 按钮或者单击列表上方的设置图标以弹出 **标签管理** 窗口。在标签管理窗口可对创建好的标签进行编辑和删除操作。也可单击上方的 **新建标签** 按钮指定新标签的名称和图标颜色。                                                                                                                                                                                                                                                                                |
   | 智能解析        | 在文本框中粘贴连接串信息，ODC 会自动识别连接串并在窗口中填充各项连接信息。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   | 连接地址        | - **主机名** ：连接的数据库所在服务器的 IP 信息。<br> - **端口** ：连接的数据库所在服务器的端口号信息。<br> - **集群** ：连接的数据库所在集群的名称。<br> - **租户** ：连接的数据库所在租户的名称。<br> **说明**<br>  主机名和端口号可从连接的数据库所在租户信息页面获取，如在公有云或 OCP 上创建的租户。                                                                                                                                                                                                                                                                                  |
   | 默认数据库       | 连接 MySQL 租户中的数据库时，需填写该连接要使用的默认数据库（连接 Oracle 租户中的数据库时则无需填写该项）。 <br>**说明**<br>  MySQL 模式下，如不指定默认库，则默认连接 information_schema 库。 如 information_schema 库连接失败，请将默认数据库设置为该用户有权限的库。                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | 数据库账号       | - 数据库用户名：在租户中创建的账号（MySQL 模式下，该账户必须具有访问默认数据库的权限）。<br> - 数据库密码：在租户中创建的账号的密码。单击数据库密码框后的 **测试连接** 按钮，测试是否能够连接到目标数据库。<br> - 保存密码：关闭该项，连接信息中将不保存数据库密码信息，每次进入连接或测试连接时，需在弹出的密码弹窗中输入数据库密码以进入连接；开启该项，连接信息将保存数据库密码信息，每次进入连接无需输入数据库密码。   <br>   **说明** <br> - 如配置信息有误，会出现异常提示，例如用户或密码不对、网络异常等。<br> - 用户只可连接本租户下的数据库，否则会报出测试失败的错误。    |
   | SQL 查询超时时间  | 支持自定义 SQL 超时时间，SQL 超过指定的时间时查询自动终止（默认 60s）。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
   | 查询 sys 租户视图 | 请输入拥有查询 sys 租户视图权限的账号和密码，当 **连接地址** 中已指定 **租户** 为 sys 时，该项被自动填充。<br> - **账户** ：拥有 sys 租户视图查看权限的账号。<br> - **密码** ：账号对应的密码。    输入账户和密码信息后，单击密码框后的 **测试连接** 按钮测试账户信息是否正确。ODC V2.3.0 后使用数据导入导出和查看分区信息功能时，需在此项配置 root@sys 账号。 <br> **说明**<br> - 自 ODC V2.3.0 之后版本，导入导出功能需在创建连接的高级配置中设置 root@sys 用户。<br> - 自 ODC V2.4.1 之后版本，导入导出功能查询视图信息时取消 root@sys 账号强依赖。                                                                                     |

   

3. 单击页面下方的 **保存** 按钮，即可将当前的配置信息持久保存在 ODC 连接列表中。再次登录 ODC 时，可在连接配置列表中直接选择该连接，保存连接配置时不要求测试连接一定成功。

   

4. 在页签下方，ODC 同时提供 **复制连接串** 按钮。单击该按钮，ODC 会将当前编辑的连接信息复制为连接串格式以方便获取当前配置的连接信息。

   

5. 如无需保存当前的连接配置，可单击页签下方的 **取消** 按钮，ODC 会弹出弹窗以确认是否退出当前新建连接窗口。

   




