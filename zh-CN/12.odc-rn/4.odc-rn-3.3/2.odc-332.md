ODC V3.3.2 
===============================

本次 6 月发版的 OceanBase 开发者中心（OceanBase Developer Center，ODC）V3.3.2 主要新增外部集成能力产品化和版本降级判断，并对 PL 对象的管理、PL 调试、以及 SQL 执行和导入导出等交互优化功能进行了更新。

版本信息 
-------------------------

* **当前版本：** V3.3.2

  

* **前置版本：** V3.3.1

  

* **发版时间：** 2022 年 6 月 30 日

  

* **支持的升级路径：** 对于 ODC V2.0.0 及之后版本，均可直接升级至本版本。

  




支持的 OceanBase 数据库版本 
----------------------------------------

OceanBase 开发者中心 V3.3.2 版本支持下述版本的 OceanBase 数据库。

* ODC 通用功能支持 OceanBase 数据库版本

  * OceanBase V1.4.x（主流版 V1.4.79）

    
  
  * OceanBase V2.0.x

    
  
  * OceanBase V2.1.x

    
  
  * OceanBase V2.2.x（主流版 V2.2.77）

    
  
  * OceanBase V3.1.x（主流版 V3.1.2）

    
  
  * OceanBase V3.2.x（主流版 V3.2.4）

    
  
  * OceanBase 社区版（不支持 PL 相关能力）

    
  

  

* ODC PL 功能支持 OceanBase 数据库版本

  * PL 对象（函数/存储过程/程序包）编译、PL 对象（函数/存储过程）调试和匿名块调试：支持 V2.2.7x、V3.0 及之后版本。

    
  
  * PL 对象（函数/存储过程/程序包）运行和匿名块运行：支持 V2.0.x 及之后版本。

    
  

  




部署要求变更 
---------------------------

ODC V3.3.2 之后版本增加对版本降级的限制，识别到版本回退会启动失败报错。

功能变更 
-------------------------

* SQL 执行

  * SQL 窗口语句自动补全支持 oceanbase/information_schema 下视图。

    
  

  

* PL 对象

  * 函数、存储过程和程序包对象支持批量编译能力 PL 对象。

    
  
  * 按状态筛选 PL 对象。

    
  
  * PL 对象 DDL 查看支持下载为本地文件。

    
  

  

* PL 调试

  * 调试流程和逻辑完善，修复一系列不支持的场景。

    
  

  

* 交互优化

  * 浏览器 Tab 和桌面版窗口名称包含\`@{数据库名称}\`信息。

    
  
  * 导入任务日志中增加了执行出错的具体 SQL 语句。

    
  
  * 会话管理支持鼠标悬浮显示完整的 SQL 语句。

    
  
  * SQL 窗口执行 SQL 超时会提示索引可能仍在创建。

    
  
  * 编辑角色权限时，公共资源权限需要至少配置 1 个。

    
  

  

* 系统集成

  * 新增 Web 版外部系统审批集成：本次版本支持移动 4A 审批集成。

    
  
  * 新增 Web 版堡垒机集成：支持外部账号服务集成实现自动登录和通过 URL 参数传递数据库连接参数跳转后直接进入 SQL 窗口，本次版本支持 Web 版堡垒机集成。

    
  

  




问题修复 
-------------------------

* PL 对象

  * 完善调试流程和逻辑，修复一系列不支持的场景，注意需要升级 OBServer 到最新版 V3.2.3。

    
  
  * 编译过程加固，修复部分场景下编译错误不准确和未包含行号等问题，注意需要升级 OBServer 到最新版 V3.2.3。

    
  

  

* 数据库对象

  * 表、视图、PL 对象列表未按照字母顺序排序。

    
  
  * 部分分区表对象查看报错。

    
  
  * 序列编辑出错时错误消息未展现。

    
  

  

* SQL 执行

  * Oracle 模式下，select \* from table 无唯一性约束场景生成变更语句未包含 ROWID。

    
  
  * Oracle 模式下，修改 delimiter 后执行 PL 报错。

    
  
  * 结果集中，查看 CLOB 类型时选中态放大查看文本内容无法复制。

    
  

  

* 导入导出

  * Windows 环境下导入 ZIP 文件出错。

    
  

  

* 其它模块

  * 修改用户、角色后修改时间值未更新。

    
  
  * 会话变量页面在部分场景下会崩溃。

    
  

  




已知问题 
-------------------------

* ARM 版 OBServer 中的 PL 对象不支持调试。

  

* 包含复杂类型 (cursor,record,collection)、用户自定义类型的 PL 对象不支持调试。

  

* 包含 CLOB 变量的 PL，对其进行调试会导致 OBServer core。

  

* 结构或数据的导出量上限为 2GB，超限会导致最终导出数据不完整。

  

* 导出任务详情中，导出对象的数据总记录数依赖 OceanBase 数据库视图，并非精准值。

  

* 结构或数据的导入量上限为 2GB，超限文件无法上传。

  

* 需设置 `ob_enable_trace_log` 参数为 `on`，否则只显示首次执行的 SQL 的执行计划。





