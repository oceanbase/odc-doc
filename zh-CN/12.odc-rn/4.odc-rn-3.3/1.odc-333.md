ODC V3.3.3 
===============================

本次 8 月发版的 OceanBase 开发者中心（OceanBase Developer Center，ODC）V3.3.3 主要对 PL 调试、数据库变更任务的并发能力和客户端版 ODC 的启动速度等功能进行了优化。

版本信息 
-------------------------

* **当前版本：** V3.3.3

  

* **前置版本：** V3.3.2

  

* **发版时间：** 2022 年 8 月 2 日

  

* **支持的升级路径：** 对于 ODC V2.0.0 及之后版本，均可直接升级至本版本。

  




支持的 OceanBase 数据库版本 
----------------------------------------

OceanBase 开发者中心 V3.3.3 版本支持下述版本的 OceanBase 数据库。

* ODC 通用功能支持 OceanBase 数据库版本

  * OceanBase V1.4.x（主流版 V1.4.7）

    
  
  * OceanBase V2.0.x

    
  
  * OceanBase V2.1.x

    
  
  * OceanBase V2.2.x（主流版 V2.2.7）

    
  
  * OceanBase V3.1.x（主流版 V3.1.2）

    
  
  * OceanBase V3.2.x（主流版 V3.2.4）

    
  
  * OceanBase 社区版（不支持 PL 相关能力）

    
  

  

* ODC PL 功能支持 OceanBase 数据库版本

  * PL 对象（函数/存储过程/程序包）编译、PL 对象（函数/存储过程）调试和匿名块调试：支持 V2.2.7、V3.0.x 及之后版本，推荐 OceanBase V3.2.3 BP4 及之后版本体验更友好的调试能力。

    
  
  * PL 对象（函数/存储过程/程序包）运行和匿名块运行：支持 V2.0.x 及之后版本。

    
  

  




功能变更 
-------------------------

* PL 对象

  * PL 编译报错时支持显示具体错误行号。

    
  
  * 运行 PL 语句时，支持适配和检查入参类型，如出现不符合参数类型的入参值则会报错拒绝。

    
  

  

* PL 调试

  * 新增 ARM 环境下的 PL 调试。

    
  
  * 新增对 PL 中包含复杂类型（cursor,record,collection）的场景调试。

    
  
  * 新增调试 GBK 字符集。

    
  

  

* 部署升级

  * Windows 系统下，客户端版 ODC 的首次启动时间控制在 30 秒左右。

    
  
  * ODC 镜像的环境变量中，新增参数 `ODC_SERVER_RPC_PORT`，用于指定 ODC-Server 的内部 RPC 通信监听端口。

    
  

  

* 堡垒机集成

  * ODC 系统配置中新增 2 个账号集成参数：

    * `odc.integration.bastion.account.query.request-encrypted`，用于判断发送请求时是否对 request body 进行加密。

      
    
    * `odc.integration.bastion.account.query.response-encrypted`，用于控制接收到响应后是否对 response body 进行加密。

      
    

    
  

  

* 其它模块

  * MySQL/Oracle 模式下，ODC V3.3.3 版本支持适配 OceanBase V3.2.3 版本的变量行为变化。

    
  
  * macOS 系统下，优化客户端版 ODC 的应用图标。

    
  

  




问题修复 
-------------------------

* PL 对象

  * 用户自定义类型时，入参的程序包运行报错。

    
  
  * 修复运行带有 OUT/INOUT 参数的函数逻辑。

    
  
  * 部分场景下调试报错。

    
  

  

* PL 调试

  * 修复匿名块调试跳入跳出场景问题。

    
  
  * 修复设置断点后结束调试，再重新发起调试时报错问题。

    
  
  * 修复多种场景下，调试未完全退出导致的会话占用和资源占用问题。

    
  
  * 修复传入不符合入参类型的入参值导致的调试失败问题。

    
  
  * 修复 ODC 前端的调试日志显示滞后的问题。

    
  
  * 修复调试函数结束时 OUT 参数未显示结果值的问题。

    
  
  * 修复调试搁置一段时间后再次操作报错并无法结束的问题。

    
  
  * 修复带 OUT 参数的函数调试报错的问题。

    
  

  

* 部署升级

  * 自 V2.4.0 版本升级到更高版本可能会失败。

    
  
  * 使用 OceanBase V1.4.7 版本的 MetaDB 升级 ODC 可能会失败。

    
  

  

* 任务流程

  * 并发任务数量较多时，可能出现任务一直等待不执行。

    
  

  

* SQL 窗口

  * MySQL 模式下，数据库名称包含大写字母时进入连接报错。

    
  
  * 表名称包含 `$` 或 `/` 时改写失效。

    
  
  * Oracle 模式下，查询语句中不包含 ROWID，对 SQL 语句进行改写使其带有 ROWID 值的隐藏列时，部分场景因逻辑错误导致改写失败，结果集不可编辑。

    
  

  

* 安全加固

  * 修复部分场景下的 SSRF 风险。

    
  
  * 升级 common-configuration2 依赖库版本，修复 CVE-2022-23305 安全漏洞。

    
  
  * 修复部分功能的水平越权风险。

    
  

  

* 其它模块

  * Windows 系统的部分场景下，启动客户端版 ODC 超时导致启动失败。

    
  
  * 在公共资源管控台的任务流程中，流程配置权限依赖用户管理权限。

    
  
  * 堡垒机集成时，部分场景下账号集成出错。

    
  

  




已知问题 
-------------------------

* 结构或数据的导出量上限为 2GB，超限会导致最终导出数据不完整。

  

* 导出任务详情中，导出对象的数据总记录数依赖 OceanBase 数据库视图，并非精准值。

  

* 结构或数据的导入量上限为 2GB，超限文件无法上传。

  

* 需设置 `ob_enable_trace_log` 参数为 `on`，否则只显示首次执行的 SQL 的执行计划。





