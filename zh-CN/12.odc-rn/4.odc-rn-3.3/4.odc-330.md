ODC V3.3.0 
===============================

#RNDate#2022-04-02

本次 4 月发版的 OceanBase 开发者中心（OceanBase Developer Center，ODC）V3.3.0 主要新增任务流程和操作记录，并对首页管理、连接管理、工作台、工具、会话、回收站、任务中心、数据库对象、产品功能介绍和帮助中心等功能进行了更新。

版本信息 
-------------------------

* **当前版本：** V3.3.0

  

* **前置版本：** V3.2.3

  

* **发版时间：** 2022 年 4 月 2 日

  

* **支持的升级路径：** 对于 ODC V2.0.0 及之后版本，均可直接升级至本版本。

  




支持的 OceanBase 数据库版本 
----------------------------------------

OceanBase 开发者中心 V3.3.0 版本支持下述版本的 OceanBase 数据库。

* ODC 通用功能支持 OceanBase 数据库版本：

  * OceanBase V1.4.x（主流版 V1.4.79）

    
  
  * OceanBase V2.0.x（主流版 V2.2.30）

    
  
  * OceanBase V2.1.x（主流版 V2.2.77）

    
  
  * OceanBase V2.2.x

    
  
  * OceanBase V3.1.x

    
  
  * OceanBase V3.2.x

    
  
  * OceanBase 社区版（不支持 PL 相关能力）

    
  

  

* ODC PL 功能支持 OceanBase 数据库版本：

  * PL 对象（函数/存储过程/程序包）编译、PL 对象（函数/存储过程）调试和匿名块调试：支持 V2.2.7x、V3.0 及之后版本。

    
  
  * PL 对象（函数/存储过程/程序包）运行和匿名块运行：支持 V2.0.x 及之后版本。

    
  

  




部署要求变更 
---------------------------

自 ODC V3.3.0 起，ODC 提供变更流程和操作审计等企业级管控能力，Web 版 MetaDB 必须为 OceanBase V2.2.76 及之后版本，否则校验无法通过；MetaDB 所在 OceanBase 租户规格推荐 2C8G 及以上配置，配置过低容易导致性能问题。

> **说明**  
> ODC 在启动时会监测 MetaDB 的 OceanBase 版本号，如校验不通过会启动失败，如您的 MetaDB 集群版本低于 V2.2.76，需首先升级 MetaDB 集群。

功能变更 
-------------------------

* 操作记录：新增操作审计能力，主要包括个人设置，密码管理，连接管理，数据库操作等 14 种事件类型。

  

* 任务流程：公共资源管控台新增管理员在任务流程内配置审批流，公共连接只读权限用户可以通过审批流完成数据库变更、导入、导出和模拟数据等任务。

  

* 任务中心：异步执行功能升级为数据库变更。

  

* 连接管理：新增 ODP(Sharding) OceanBase MySQL 数据源类型。

  

* 回收站：新增 Session 级别开启/关闭回收站功能。

  

* 会话管理：SQL 执行窗口新增独立 Session 能力。

  

* 导入导出：支持 OceanBase MySQL 导出函数和存储过程；支持多脚本文件上传导入及异步执行的能力。

  

* SQL 执行：统一 SQL 窗口和命令行窗口的脚本管理，支持高达 250MB 的脚本文件；支持 SQL 窗口左侧数据库对象拖拽生成 DML 语句；支持 PL 执行报错返回行号信息（OceanBase V3.2.1 以上版本）。

  

* 数据库对象：去除表对象分区查看 sys 租户依赖；优化创建索引 DDL 语句超时场景下的错误消息。

  

* 体验改进：提供内置 HTML 文档，快速访问相关文档；支持智能解析公共连接配置命令行；支持在连接内部快速切换到其它连接；支持连接列表调整列宽。

  




问题修复 
-------------------------

* 对象管理

  * 表对象新增约束编辑状态下，无法查看表原有的约束信息。

    
  
  * 新建表时，表名称包含特殊字符时创建索引失败。

    
  
  * 新建模拟数据时，切换 schema 后无法选择导出对象。

    
  
  * 表注释为空时，修改表不生效。

    
  
  * 连接配置复制为命令行，在租户为空时生成的命令行语法错误。

    
  

  

* SQL 执行

  * Oracle 模式下，IN 值转换使用了双引号。

    
  
  * Oracle 模式下，SQL/PL 注释内容中包含分号时拆句错误导致报语法错误。

    
  
  * 结果集编辑部分场景新增列生成的 insert 语句带有 ODC 内部字段 `__ODC_INTERNAL_ROWID__`。

    
  
  * 无法查看 OceanBase V3.2.3 执行计划。

    
  

  

* PL 对象

  * OceanBase V3.2.1 存储过程无法修改。

    
  
  * `dbms_job`在使用 run 任务时不能通过查询结果传递的方式运行。

    
  
  * 部分场景下 PL、匿名块无法调试。

    
  
  * 存储过程带有 merge 时运行报错。

    
  

  

* 工具

  * Oracle 模式下，username 为小写时命令行窗口无法连接。

    
  

  

* 其它模块

  * 修改密码时，填写错误的原密码弹窗报错显示具体剩余次数。

    
  

  




已知问题 
-------------------------

* X86 版 OBServer 中不支持带输出参数的函数调试。

  

* ARM 版 OBServer 中的 PL 对象不支持调试。

  

* 包含复杂类型（cursor,record,collection）、用户自定义类型的 PL 对象不支持调试。

  

* 包含 CLOB 变量的 PL，对其进行调试会导致 OBServer core。

  

* 结构或数据的导出量上限为 2G，超限会导致最终导出数据不完整。

  

* 导出任务详情中，导出对象的数据总记录数依赖 OceanBase 数据库视图，并非精准值。

  

* 结构或数据的导入量上限为 2G，超限文件无法上传。

  

* 需设置 `ob_enable_trace_log` 参数为 `on`，否则只显示首次执行的 SQL 的执行计划。






