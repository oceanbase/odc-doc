# ODC V4.1.3

本次 5 月发版的 OceanBase 开发者中心（OceanBase Developer Center，ODC）V4.1.3 主要适配 OceanBase V4.1.0 数据库版本、升级 OceanBase 导数工具组件版本至 V4.2.3，并升级数据库驱动 oceanbase-client 版本至 V2.4.3。

## 版本信息

* **当前版本：** V4.1.3

* **前置版本：** V4.1.2

* **发版时间：** 2023 年 05 月 24 日

* **支持的升级路径：** 对于 ODC V2.0.0 及之后版本，均可直接升级至本版本。

## 支持的 OceanBase 数据库版本

OceanBase 开发者中心 V4.1.3 版本支持下述版本的 OceanBase 数据库。

* ODC 通用功能支持 OceanBase 数据库版本

  * OceanBase V1.4.x（主流版 V1.4.7）
  
  * OceanBase V2.0.x
  
  * OceanBase V2.1.x
  
  * OceanBase V2.2.x（主流版 V2.2.7）
  
  * OceanBase V3.1.x（主流版 V3.1.2）
  
  * OceanBase V3.2.x（主流版 V3.2.4）

  * OceanBase V4.0.0

  * OceanBase V4.1.0
  
  * OceanBase 社区版

* ODC PL 功能支持 OceanBase 数据库版本

  * PL 对象（函数/存储过程/程序包）编译、PL 对象（函数/存储过程）调试和匿名块调试：支持 V2.2.7、V3.0.x 及之后版本，推荐 OceanBase V3.2.3 BP4 及之后版本体验更友好的调试能力。
  
  * PL 对象（函数/存储过程/程序包）运行和匿名块运行：支持 V2.0.x 及之后版本。

## 功能变更

* 适配 OceanBase V4.1.0 数据库版本。 

## 依赖库升级

* 升级 OceanBase 导数工具组件版本至 V4.2.3。

* 升级数据库驱动 oceanbase-client 版本至 V2.4.3。

## 问题修复

* 管控协同

  * 越权添加他人账号的资源管理权限。

  * 使用 system_admin 角色创建其他角色时报错权限不足。

  * 查询任务状态接口存在水平越权。

  * 编辑角色时存在垂直越权错误。

  * 任务无法手动终止，终止成功后依然会继续运行。

* SQL 执行

  * 无法执行包含 language 标识符的 SQL 语句。

  * 修改包含 Hint 的 SQL 语句时出错导致 Hint 失效。

  * Oracle 模式下，编辑 SQL 语句时补全表名功能不可用。

  * 查看 BLOB/CLOB 等大字段列时数据产生跳变。

  * 创建的 PL 语句中包含 WHILE-LOOP 时，分句结果结尾多出分号。

  * 执行创建的大规模 PL 语句时会 hang 住。

* 导入导出

  * 启动任务失败且无报错日志。

  * 导出数据库对象列表中无公共同义词。

  * 导出程序包中存在 ODC 内建的程序包。

  * ODC 无法导出临时表。

* 数据库变更

  * 创建数据库变更时，设置 **执行超时时间** 无效。

* 连接管理

  * 创建连接时，输入数据库用户名和数据库密码后单击 **测试连接** 无法识别云服务的连接地址。

* 数据库对象

  * MySQL 模式下，无法查看 `mysql` 数据库中内置的表对象详情。

  * 执行 PL 对象时报错超时，修改会话变量同样无效。

* 安全加固

  * 解决官网体验站 odc_back_url 任意 URL 跳转。

  * 加固 ODC `admin` 账户初始密码，支持通过环境变量设置初始密码。

  * 升级 fastjson 版本至 1.2.83_noneautotype。

## 已知问题

* 客户端版 ODC 不支持安装在中文目录名中。

* 导出包含虚拟列的表时，导出的数据文件和内容显示异常。

* Web 版 ODC 中，结构或数据的导入量上限为 2GB，超限文件无法上传。

* Web 版 ODC 中，结构或数据的导出量上限为 2GB，超限会导致最终导出数据不完整。

* 导出任务详情中，导出对象的数据总记录数依赖 OceanBase 数据库视图，并非精准值。

* 需设置 `ob_enable_trace_log` 参数为 `on`，否则只显示首次执行的 SQL 的执行计划。