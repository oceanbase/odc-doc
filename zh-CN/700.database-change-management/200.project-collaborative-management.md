# 项目协同管理

## 背景信息

Web 版 ODC V4.2.0 支持拥有创建项目权限的用户创建项目和添加项目成员，成员可以在项目中添加和变更数据库。

本篇文档旨在介绍如何通过项目协同实现数据库变更。

## 原理介绍

![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/420/1100.database-change-management/1.project-collaborative-management/1.png)

1. ODC 系统管理员授予用户创建项目的角色后，该用户创建项目并添加项目成员。

2. 项目管理员/ DBA 成员添加数据库。

3. 项目普通成员发起工单，申请数据库变更。

4. ODC 根据风险等级识别规则判断出该工单的风险等级，执行该风险等级对应的审批流程。

5. 审批通过后，ODC 自动执行或者用户手动执行数据库变更。

## 创建项目

### 方法一：拥有创建项目角色的用户创建项目。

1. 系统管理员授予给用户创建项目的权限。

   ![2](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/420/1100.database-change-management/1.project-collaborative-management/2.png)

2. 项目管理员创建项目并添加项目成员。

   <main id="notice" type='explain'>
      <h4>说明</h4>
      <p>拥有创建项目权限的 ODC 用户可以创建项目。默认情况下，项目创建者被授予该项目管理员角色。项目管理员通过在项目中配置 ODC 所属的用户为该项目的成员后，项目成员可以在使用自己的账号登录 ODC 时访问该项目，并在同一个项目中进行团队协作。</p>
   </main> 

   ![3.0](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/424/700.database-change-management/200.project-collaborative-management/3.0.png)

   |信息项|说明|
   |-------------|--------------|
   | 项目名称        | 创建的项目名称。 |
   | 管理员        | 支持管理项目所有数据库和成员。  |
   | DBA        | 支持管理项目所有数据库。|
   |  开发者       | 允许登录所有数据库、执行 SQL、提交工单，通常是开发人员。   |
   |安全管理员（可选）|只允许管理项目的敏感列和参与审批。|
   |参与者（可选）|只允许参与审批。|
   |描述（可选）|非必填项。|

### 方法二：加入项目

ODC 用户可以通过 **申请项目权限** 加入已创建的项目。

1. 在 **项目**/**工单** 中，单击 **申请项目权限**。

   a. 通过项目入口申请。

      ![3.1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/423/700.database-change-management/200.project-collaborative-management/3.1.png)

   b. 通过工单入口申请。

      ![3.2](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/700.database-change-management/200.project-collaborative-management/3.2.png)

2. 选择项目、项目角色并输入申请原因后，单击 **新建**，创建项目权限申请。

   ![3.3](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/700.database-change-management/200.project-collaborative-management/3.3.png)

3. 在工单中查看审批状态。

   ![3.4](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/423/700.database-change-management/200.project-collaborative-management/3.4.png)

4. 审批通过后，可以在项目列表中查看已加入的项目。

   ![3.5](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/423/700.database-change-management/200.project-collaborative-management/3.5.png)

## 数据库管理

### 方法一：拥有数据库权限的用户添加数据库

1. 单击项目名称，进入该项目管理页面。

   ![4](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/700.database-change-management/200.project-collaborative-management/4.png)

2. 在数据库页面中添加数据库。

   ![5](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/700.database-change-management/200.project-collaborative-management/5.png)

3. 项目成员可以导出/导入/数据库变更/登录数据库，且项目管理员/DBA 成员支持设置库管理员和修改所属项目。

   ![6.0](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/700.database-change-management/200.project-collaborative-management/6.0.png)

   <main id="notice" type='explain'>
     <h4>说明</h4>
     <p>如果数据源已绑定项目，数据源内的数据库不支持转移到其它项目中。</p>
   </main>

### 方法二：申请数据库权限

<main id="notice" type='notice'>
  <h4>注意</h4>
  <ul>
  <li>申请数据库权限，ODC 用户须确认已加入项目。</li>
  <li>ODC 用户仅支持申请已加入项目中的数据库权限。</li>
  </ul>
</main>

ODC 用户可以通过 **申请库权限** 以获取查询/导出/变更数据库权限。

1. 在 **项目**/**工单** 中，单击 **申请库权限**。

   a. 通过项目入口申请。

      ![1database](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/700.database-change-management/200.project-collaborative-management/1database.png)

   b. 通过工单入口申请。

      ![2database](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/700.database-change-management/200.project-collaborative-management/2database.png)

2. 选择项目、数据库、数据库权限类型、权限有效期并输入申请原因后，单击 **新建**，创建库权限申请。

   ![3database](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/700.database-change-management/200.project-collaborative-management/3database.png)

## 工单管理

无数据库编辑权限的项目普通成员可以通过工单申请执行导出数据/导入数据/模拟数据/数据库变更/无锁结构变更/SQL 计划/数据归档任务。

![7](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/700.database-change-management/200.project-collaborative-management/7.png)

## 成员管理

项目管理员可以在成员页面中添加/编辑/移除成员，以及管理库权限。

![8.0](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/700.database-change-management/200.project-collaborative-management/8.png)

## 消息通知

项目成员可以在消息通知页面中启用需要通知的工单事件类型和添加推送通道（钉钉/飞书/企业微信/自定义 webhook），当启用的工单事件发生变更时，ODC 会发送变更消息提示项目成员。配置方法请参见 [消息通知管理](1000.message-notification.md)。

![9](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/700.database-change-management/200.project-collaborative-management/9.png)

## 项目设置

项目管理员可以在设置页面中修改项目名称和归档项目。

![10](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/430/700.database-change-management/200.project-collaborative-management/10.png)

## 相关文档

- [风险等级、风险识别规则与审批流程](../700.database-change-management/300.risk-level-risk-identification-rules-and-approval-process.md)

- [SQL 检查规范](../700.database-change-management/400.sql-check-specification.md)

- [SQL 窗口规范](../700.database-change-management/500.sql-window-specification.md)

- [创建数据源](../400.connection-management/100.create-a-personal-connection.md)

- [数据库变更管理](../700.database-change-management/600.database-change.md)

- [导入数据](../600.import-and-export/100.import-data.md)

- [导出数据](../600.import-and-export/200.export-data.md)

- [用户和角色](100.user-permission-and-management/100.odc-users-and-roles.md)

