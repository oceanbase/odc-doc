任务流程管理 
===========================



背景信息 
-------------------------

OceanBase 开发者中心（OceanBase Developer Center，ODC）支持拥有特殊权限的用户（拥有公共资源管控台权限的管理员）定义变更任务流程，其他只读权限的用户可根据所定义的任务流程发起 [变更任务](../../7.client-odc-user-guide/8.client-odc-task-management/1.client-odc-task-management-overview.md)。

拥有该特殊权限的用户可在公共资源管控台内修改/查看/停用变更任务流程。

![任务流程图](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0008191561/p416627.png)

管理任务流程 
---------------------------

![公共资源管控台-任务流程](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8948808461/p420863.png)

进入 **公共资源管控台** 页面后，在左导航栏中单击 **任务流程** ，进入 **任务流程管理** 页面。

在 **任务流程管理** 页面中，任务流程信息以列表的形式进行显示：

* 通过刷新按钮可刷新列表信息。

  

* 通过列表右上角的搜索栏搜索目标任务流程。

  

* 勾选复选框![复选框](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5526247461/p416674.jpg) ，支持批量删除。

  




### 任务流程管理列表 

任务流程管理列表中的基本信息如下所示，且列表中的每一列均提供筛选器以供按列筛选任务流程。


|  信息项   |                                                                                                                      说明                                                                                                                       |
|--------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 任务流程名称 | 显示任务流程名称。                                                                                                                                                                                                                                     |
| 任务类型   | 显示任务类型。 单击筛选图标![筛选](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0583667361/p352180.jpg)，可筛选任务类型（导入/导出/模拟数据/数据库变更）。                                                                                           |
| 风险等级数  | 显示设置的风险等级数。 默认风险等级数为 1，可自定义，最大值为 10。                                                                                                                                                                                          |
| 创建人    | 显示任务发起人。 单击搜索图标![搜索](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5526247461/p416691.jpg)，可搜索和筛选创建人。                                                                                                          |
| 状态     | 显示任务流程状态。 单击筛选图标![筛选](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0583667361/p352180.jpg)，可筛选所属任务状态（启用/停用）。                                                                                                  |
| 创建时间   | 显示上一次对任务流程操作的时间。                                                                                                                                                                                                                              |
| 操作     | 显示 **查看** 、 **编辑** 和 **停用** / **启用** 功能键。 * 查看：查看当前任务流程详情；   * 编辑：修改当前任务流程详情；   * 停用：直接修改任务流程的状态 **。**    |



### 查看任务流程 

![任务流程-查看](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5526247461/p416860.png)

单击连接信息 **操作** 项下的 **查看** 按钮，以弹出 **任务流程详情** 面板。


|   信息项    |                                           说明                                            |
|----------|-----------------------------------------------------------------------------------------|
| 任务流程基本信息 | 显示 **任务流程名称** 、 **任务类型** 、 **风险等级数** 、 **审批有效期** 、 **执行等待有效期** 、 **执行有效期** 和 **备注** 信息。 |
| 等级       | 显示任务等级，包括审批节点、审批角色和可审批人。                                                                |
| 创建人      | 显示任务发起人。                                                                                |
| 创建时间     | 显示上一次对任务流程操作的时间。                                                                        |



### 编辑任务流程 

![任务流程-编辑](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5526247461/p416933.png)

单击连接信息 **操作** 项下的 **编辑** 按钮，以弹出 **编辑任务流程** 面板。


|  信息项   |                                                                                                                                                                                                   说明                                                                                                                                                                                                    |
|--------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 任务流程名称 | 同组织架构下任务流程名称不可重复，由数字、中文、英文字母组成，最大不可超过 110 个字符。                                                                                                                                                                                                                                                                                                                                                          |
| 任务类型   | - 目前仅数据库变更支持自定义任务流程，其它类型变更不支持自定义。数据库变更的任务子类包括：Update/Delete/Insert/Select/Create/Drop/Alter/其它。<br>    - 允许的变更操作类型，如用户要发起的变更操作不在任务流程定义允许的范围内，则不允许发起任务。                                                                                                                                                               |
| 风险等级数  | 默认风险等级数为 1，可自定义，最大值为 10（推荐设置为 3）。                                                                                                                                                                                                                                                                                                                                                                       |
| 任务审批流程 | - 默认风险等级数为 1，只有一个等级，该等级包含用户选择的所有任务子类, 不对变更的数据量做限制，默认需管理员审批，可自定义该等级的审批节点（节点数和审批角色）。<br>     - 按如果风险等级数不为1，各等级可分别定义，定义项包括： **任务子类** 、 **变更的 SQL 数量范围** 和 **设置审批节点** 。    |
| 流程有效期  | 定义审批有效时间，如超过定义的时间长度，审批自动终止； 默认 24h（1天），可自定义，最大值 240h（10天）。 * 审批有效期：审批超时，任务将过期。   * 执行等待有效期：手动执行前等待超时，任务将过期。   * 执行有效期：执行超时，任务将过期。                                                                                                                  |
| 任务流程状态 | 选择 **启用** 或 **停用** 任务流程状态（已停用的变更流程不可再发起任务）。                                                                                                                                                                                                                                                                                                                                                             |
| 备注     | 填写对该流程的说明，最大不超过 200 个字符。                                                                                                                                                                                                                                                                                                                                                                                |



### 停用任务流程 

单击目标连接 **操作** 项下的 **停用** 按钮会弹出是否停用任务流程对话框，单击 **确定** ，停用任务流程。
**说明**



被停用的自定义任务流程，在任务发起页面不会再显示该任务流程（即不可再发起关于该任务流程的任务）。





