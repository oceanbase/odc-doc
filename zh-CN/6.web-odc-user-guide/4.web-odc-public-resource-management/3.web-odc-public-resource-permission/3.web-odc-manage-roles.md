角色管理 
=========================

角色是为用户赋予各种权限的一种对象，为多种权限的集合，使用角色可将一组具有相同权限的用户组织在一起。为便于用户赋予并管理其在 OceanBase 开发者中心（OceanBase Developer Center，ODC）所拥有的权限，可自定义角色并将角色赋予用户。

进入 **公共资源管控台** 页面后，在左导航栏中单击 **资源权限** \> **角色** ，进入 **角色管理** 页面。

![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/410/public%20resource/role/1.png)

内置角色 
-------------------------

ODC 中内置了管理员角色 **system_admin** ，该角色被自动赋予给管理员用户 **admin** ，该角色可进行系统有关的所有操作且默认可访问所有的公共资源和个人资源 *，* 该角色不支持被编辑、删除和停用 *。*

新建角色 
-------------------------

在 **角色管理** 页面的右上角单击 **新建角色** 按钮，弹出 **新建角色** 面板。

![2](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/410/public%20resource/role/2.png)

新建角色的操作步骤如下：

1. 指定 **角色名称**。

   指定新建角色的名称，角色名称为必填项，长度不超过 48 位字符。
   

2. 指定 **角色状态** 。

   新创建的角色默认是 **启用** 状态，您可以手动选择 **停用** ，被停用的角色其权限将不生效。
   

3. 选择 **权限类型** 。

   选择要为当前角色指定的权限类型。

   当前 ODC 支持指定 连接访问权限、资源管理权限 和 系统操作权限，勾选需要设置的权限后，下方会出现 **权限设置** 项 **。** 创建角色时，必须为该角色指定至少一种权限类型并进行设置。
   

4. 进行 **权限设置** 操作 **。** 

   选择了 **权限类型** 后 **，权限设置** 项下会出现对应类型的设置页签。
   

   |  权限类型  |                                                                                                                                                                                                                功能描述                                                                                                                                                                                                                |
   |--------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | 连接访问权限 | <ul><li>资源类型：包括公共连接和资源组权限。单击第一个文本框，在下拉列表中选择想要添加的资源。 </li><li> 资源名称：根据所选的资源类型，单击第二个文本框，下拉列表中会显示当前系统中已创建的对应资源名称，在列表中选择需授权的资源（支持多选）。 </li><li> 资源权限：单击第三个文本框，在下拉列表中选择需授权的权限。权限包含 **只读**、**读写**  和 **可申请**，关于权限的详细说明，请参见本篇 **权限说明**。 单击 **+添加** 按钮，可同时为该角色设置多个公共资源权限。 </li></ul>   |
   | 资源管理权限 | <ul><li> 资源类型：公共连接、资源组、角色和用户的管理权限。单击第一个文本框，在下拉列表中选择想要添加的资源。</li><li> 资源名称：根据所选的资源类型，单击第二个文本框，下拉列表中会显示当前系统中已创建的对应资源名称，在列表中选择需授权的资源（支持多选）。</li><li> 资源权限：单击第三个文本框，在下拉列表中选择需授权的权限。权限包含 **可管理**、**可编辑**  和 **仅查看**，关于权限的详细说明，请参见本篇 **权限说明**。单击 **+添加** 按钮，可同时为该角色设置多个公共资源权限。</li></ul> |
   | 系统操作权限 | <ul><li> 资源类型：包括个人连接和管控台的操作权限。单击第一个文本框，在下拉列表中选择想要添加的资源。</li><li> 资源权限：单击第三个文本框，在下拉列表中选择需授权的资源权限。权限包含 **可操作**  和 **仅查看**，关于权限的详细说明，请参见本篇 **权限说明**。单击 **+添加** 按钮，可同时为该角色设置多个公共资源权限。 </li></ul> |

5. 指定 **备注（可选）** 。

   在文本框中输入备注信息，非必填项，长度不超过 140 位字符。
   

6. 完成角色新建。

   单击面板右下角的 **新建** 按钮以完成角色的新建。
   




权限说明 
-------------------------

当前 ODC 支持设置 **公共资源权限** 和 **个人资源权限** ，公共资源分为 **公共连接** 和 **资源组** 两种，它们的权限范围和对权限的支持说明如下表所示：


|       权限范围       |              只读               |                                                                          读写                                                                          |
|------------------|-------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------|
| SQL 窗口           | 支持 SQL 窗口查询语句                 | 支持 SQL 窗口控制语句 支持 SQL 窗口查询语句 支持 SQL 窗口数据变更语句 支持 SQL 窗口结构变更语句                                          |
| 结果集              | 查看结果集 导出结果集   | 查看结果集 导出结果集 修改结果集                                                                                                    |
| 匿名块窗口            | 支持除写入外的其他操作                   | 全部匿名块窗口权限                                                                                                                                            |
| 命令行窗口            | 支持除写入外的其他操作                   | 全部命令行窗口权限                                                                                                                                            |
| 模拟数据             | 不支持                           | 全部模拟数据权限                                                                                                                                             |
| 异步执行             | 支持除写入外的其他操作                   | 全部异步执行权限                                                                                                                                             |
| 导入导出             | 导出                            | 导入 导出                                                                                                                                |
| 会话               | 查看会话属性 查看会话列表 | 查看会话属性 修改会话属性 查看会话列表 修改会话列表                                                                          |
| 回收站              | 查看回收站                         | 查看回收站 修改回收站                                                                                                                          |
| 表（非 SQL 语句操作）    | 查看表定义 查看表数据   | 查看表定义 查看表数据 修改表定义 修改表数据 新建表 删除表                                      |
| 视图（非 SQL 语句操作）   | 查看视图定义 查看视图数据 | 查看视图定义 查看视图数据 新建视图 删除视图                                                                              |
| 函数（非 SQL 语句操作）   | 查看函数定义                        | 查看函数定义 修改函数定义 运行函数 编译函数 调试函数 新建函数 删除函数               |
| 存储过程（非 SQL 语句操作） | 查看存储过程定义                      | 查看存储过程定义 修改存储过程定义 运行存储过程 编译存储过程 调试存储过程 新建存储过程 删除存储过程 |
| 程序包（非 SQL 语句操作）  | 查看程序包定义                       | 查看程序包定义 修改程序包定义 运行程序包 编译程序包 调试程序包 新建程序包 删除程序包        |
| 触发器（非 SQL 语句操作）  | 查看触发器定义                       | 查看触发器定义 修改触发器定义 新建触发器 删除触发器 编译触发器                                                    |
| 类型（非 SQL 语句操作）   | 查看类型定义                        | 查看类型定义 修改类型定义 新建类型 删除类型 编译类型                                                         |
| 同义词（非 SQL 语句操作）  | 查看同义词定义                       | 查看同义词定义 新建同义词 删除同义词                                                                                                  |
| 序列（非 SQL 语句操作）   | 查看序列定义                        | 查看序列定义 修改序列定义 新建序列 删除序列                                                                              |



管理角色 
-------------------------

![3](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/410/public%20resource/role/3.png)

进入 **角色管理** 页面后，角色信息以列表形式显示：

* 通过刷新按钮可刷新列表信息。

* 通过列表右上角的搜索栏搜索角色。

* 支持调整连接列表的列宽。

* 同时，可通过角色管理页面提供的功能键查看和管理已创建的角色。

  




### 角色列表 

角色列表基本信息如下所示，且列表中的每一列均提供筛选器以供按列筛选角色。


| 信息项  |                                       说明                                       |
|------|--------------------------------------------------------------------------------|
| 角色名称 | 显示为角色的名称。                                                                      |
| 权限类型 | 显示为角色指定了哪些类型的权限。                                                               |
| 状态   | 显示角色状态为 **启用** 或 **停用** 。                                                      |
| 更新时间 | 显示角色信息最近一次被更新的时间。                                                              |
| 操作   | 显示 **查看** 、 **编辑** 和 **停用** / **启用** 功能键。可单击 **停用** / **启用** 按钮直接修改角色的状态 **。** |



### 查看角色

![4](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/410/public%20resource/role/4.png)

1. 单击角色信息 **操作** 栏中的 **查看** 按钮，以弹出 **角色信息** 面板。面板中有 **角色详情** 和 **相关用户** 两个页签。

   

   | 信息项  |                                                                                                                                                                        说明                                                                                                                                                                         |
   |------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | 角色详情 | <ul><li> 创建信息：显示 **角色名称** 、 **权限类型** 和 **备注** 等创建角色时所指定的信息。 </li><li> 操作信息：显示 **创建人** 、 **创建时间** 和 **更新时间** 等信息。</li><li> 删除角色：单击页签中的 **删除角色** 按钮将删除当前角色，删除角色后无法恢复其相关的数据，且引用该角色的用户权限被同步回收，但不影响用户登录。</li></ul>    |
   | 相关用户 | **相关用户** 页签中显示被授予当前角色的用户列表，列表中会显示用户的 **姓名** 、 **角色** 和 **状态** 等信息。  |

   

2. 在 **角色信息** 面板中，单击右下角的 **编辑** 按钮会进入 **编辑角色** 面板。

   

3. 单击 **复制角色** 按钮会进入 **新建角色** 面板，面板中均会自动填充当前角色的信息。

  

### 编辑角色


1. 单击角色信息列表 **操作** 栏中的 **编辑** 按钮，以弹出 **编辑角色** 面板。

   

   | 信息项  |                                                                                                                说明                                                                                                                 |
   |------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | 角色详情 | 操作信息：显示 **角色名称** 、 **角色状态** 、 **权限类型** 、 **权限设置**  和 **备注** 等信息。                                                                                                                                                                  |
   | 相关用户 | **相关用户** 页签中显示被授予当前角色的用户列表，列表中会显示用户的 **姓名** 、 **角色** 和 **状态** 等信息。<br>  - 单击 **移除** ，移除当前角色的用户。<br>    - 在 **添加用户** 文本框中选择新的用户进行角色授权。    |

   

2. 在 **编辑角色** 面板中，单击右下角的 **保存** 按钮保存编辑。
