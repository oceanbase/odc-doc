# ODC V4.2.3

<main id="notice" type='notice'>
  <h4>注意</h4>
  <ul>
  <li>从 ODC V4.2.0 之前的版本升级到 ODC V4.2.3 版本前，请务必阅读本篇文档中的<strong>升级注意事项</strong>。</li>
  <li>使用 ODC V4.2.3 版本前，请关注 <a href="../../200.odc-overview/500.product-limits.md">ODC V4.2.3 产品能力限制</a>。</li>
  </ul>
</main>

## 升级注意事项

- 数据源

   - ODC V4.2.0 及之后的版本，连接配置概念调整为数据源。

   - ODC V4.2.2 版本暂不支持新建 ODP 数据源，后续版本恢复。

   - ODC V4.2.0 及之后的版本，个人连接迁移到个人空间，以数据源的形式存在。

   - ODC V4.2.0 及之后的版本，公共连接迁移到团队空间，以数据源的形式存在。

   - ODC V4.2.0 及之后的版本，原公共连接中的只读、读写账号，升级后仅保留读写账号。

- 用户权限

   - private_connection/apply_connection 角色已在 ODC V4.2.0 及之后的版本中下线，升级到 ODC V4.2.x 版本的用户引用的 private_connection/apply_connection 角色对应的权限不再生效。

   - 资源组已在 ODC V4.2.0 及之后的版本中下线。

   - 连接访问权限已在 ODC V4.2.0 及之后的版本中下线，ODC V4.2.x 中通过项目管控实现对数据库的访问控制。

- 系统设置

   - 已 ODC V4.2.0 及之后的版本中下线。

- 工单模块

   - ODC V4.2.0 之前的版本发起的工单仅支持在 **我发起的** 的分类下查看用户自己发起的工单。

- 分区计划

   - 该功能在 ODC V4.2.0 版本中升级，升级到 ODC V4.2.x 版本后，在 ODC V4.2.0 之前版本创建的历史分区计划任务将停止运行。

- SQL 计划

   - 该功能在 ODC V4.2.0 版本中升级，升级到 ODC V4.2.x 版本后，在 ODC V4.2.0 之前版本创建的历史 SQL 计划任务将停止运行。

- 任务流程

   - 该功能模块在 ODC V4.2.0 及之后的版本中下线，ODC V4.2.x 中已上线风险等级模块实现对应效果。

- 数据脱敏

   - 该功能模块在 ODC V4.2.0 版本中升级，升级到 ODC V4.2.x 版本后，在 ODC V4.2.0 之前版本创建的数据脱敏配置不再生效。

- 堡垒机集成

   - 该功能在 ODC V4.2.2 中支持账号集成和数据源配置自动填写，暂不支持 SQL 审核集成，后续版本恢复。

- 历史会话

   - 历史会话在 ODC V4.2.0 及之后的版本中下线，ODC V4.2.x 中默认会保存 SQL 窗口的使用状态。

## ODC V4.2.3-BP

本次 2 月发版的 OceanBase 开发者中心（OceanBase Developer Center，ODC）V4.2.3-PB 版本旨在修复某些缺陷。具体请参见本篇文档中的 **问题修复**。

### 版本信息

* **当前版本：** V4.2.2-BP

* **前置版本：** V4.2.2

* **发版时间：** 2023 年 11 月 24 日

* **支持的升级路径：** 对于 ODC V2.0.0 及之后的版本，均可直接升级至本版本。

### 功能变更

- 升级 JDBC 组件到 2.4.7.1。

- 提升数据归档任务性能。

## ODC V4.2.3

本次 12 月发版的 OceanBase 开发者中心（OceanBase Developer Center，ODC）V4.2.3 版本主要增强了以下四个方面的功能：

- **变更风险管控**：在本次更新中，ODC 继续提高变更风险管控模块的易用性。现在，普通用户可以主动申请加入项目，同时 ODC 也优化了 SQL 拦截的交互体验。

- **数据生命周期管理**：现在支持在产品页面上追溯日志，这显著提高了对异常执行记录的问题排查效率。对于定期执行的归档或清理任务，用户现在可以编辑其参数，这使得任务的操作对象、处理逻辑以及执行周期的调整变得更加迅速。

- **无锁结构变更**：针对不支持表重命名原子性操作的 OceanBase 版本，为了在表名切换过程中减少对业务的影响，本版本允许只锁定用户指定账号。同时用户可以选择手动切换表名，从而降低在业务高峰时的操作风险。另外，变更过程中的关键信息和业务状态都会记录在日志中，以便于监控和问题排查。

- **MySQL 数据源支持**：继上个版本新增了对原生 MySQL 数据源的支持之后，本版本进一步支持了导入导出功能。用户现在可以通过 ODC 导出 MySQL 数据源中的结构或数据，并能将导出的内容重新导入到 MySQL 数据源中。


## 版本信息

* **当前版本：** V4.2.3-BP

* **前置版本：** V4.2.3

* **发版时间：** 2024 年 2 月 1 日

* **支持的升级路径：** 对于 ODC V2.0.0 及之后的版本，均可直接升级至本版本。

## 问题修复

* 修复 Ubuntu 系统无法打开命令行窗口的缺陷。

* 修复使用 OceanBase Oracle V2.2.30 版本执行 SQL 报错的缺陷。

* 修复 SQL 检测规范和 SQL 窗口规范中数据源类型筛选无效的缺陷。

* 修复任务创建者和审批人不是当前用户时，查看任务审批节点报错的缺陷。

* 修复导出包体和同义词时未展示对象类型的缺陷。

* 修复 OceanBase Oracle 模式数据库名称为小写时数据库变更预检查失败的缺陷。

* 修复 SQL 窗口查询请求中，退出登录前端崩溃的缺陷。

* 修复设置手动提交时，SQL 语句执行失败导致回滚的缺陷。

* 修复结果集中存在多列时滑动后无法选中且随机点偶现前端崩溃的缺陷。

* 修复 DLM 更新限流周期任务失败的缺陷。

* 修复结果集筛选后查看列模式无内容的缺陷。

* 修复结果集中选中列未展示注释的缺陷。

* 修复结果集中插入数据报错的缺陷。

* 修复 SQL 窗口执行语句返回结果后切换数据库导致前端崩溃的缺陷。

* 修复 SQL 检查包含分隔符会报错的缺陷。

* 修复打开 SQL 检查中允许执行的 SQL 类型选项后，执行匿名块报错的缺陷。

## 已知问题

* 客户端版 ODC 不支持安装在中文目录名中。

* 导出包含虚拟列的表时，导出的数据文件和内容显示异常。

* Web 版 ODC 中，结构或数据的导入量上限为 2GB，超限文件无法上传。

* Web 版 ODC 中，结构或数据的导出量上限为 2GB，超限会导致最终导出数据不完整。

* 导出任务详情中，导出对象的数据总记录数依赖 OceanBase 数据库视图，并非精准值。

* 需设置 `ob_enable_trace_log` 参数为 `on`，否则只显示首次执行的 SQL 的执行计划。

## 相关文档

- [开源版 ODC](https://github.com/oceanbase/odc)

- [企业版 ODC](https://www.oceanbase.com/product/odc)