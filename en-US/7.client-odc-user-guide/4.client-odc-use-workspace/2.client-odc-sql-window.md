SQL window 
===============================



Overview 
-----------------------------

On the Database Management page of OceanBase Developer Center (ODC), click **Workspace** in the top navigation bar and click **SQL Window** in the drop-down menu that appears. 

The SQL window provides an SQL editing area for editing scripts, an execution record tab, and a result tab for displaying the execution results. The SQL window also supports executing PL/SQL statements. 

![1](https://help-static-aliyun-doc.aliyuncs.com/assets/img/en-US/1038860461/p377589.png)

SQL editing area 
-------------------------------------

The SQL editing area provides many features for you.


|                        Feature                        |                                                                                                            Description                                                                                                             |
|-------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Auto-complete                                         | The SQL editing area provides the auto-complete feature to improve your SQL statement editing efficiency.  For example, when you edit SQL statements, the table name is auto-completed for cross-database queries. |
| Intelligent identification of keywords and code       | Database keywords are highlighted in different colors, and PL/SQL statements are identified.                                                                                                                                       |
| Right-click of object names in the `SELECT` statement | When you right-click the name of a table, view, or function in a `SELECT` statement, some common operations are displayed. When you place the pointer over the name of a table, the field information is displayed.                |
| Object drag-and-drop                                  | You can directly drag objects from the object list into an SQL statement in the SQL editing area to fill in an object name in a statement.                                                                                         |
| Identification of special symbols                     | Special symbol abnormality can be identified in the editing area of the SQL window. The abnormal symbols are marked with yellow wavy underlines.                                                                                   |


**Note**



* In ODC, connections to the same database share the same session. The auto-commit feature of ODC in Oracle mode is enabled by default. If you want to manually commit transactions, you can modify the value of the **autocommit** variable on the **Session Properties** page. For more information, see [Session management](../9.client-odc-session-management.md).

  

* In manual-commit mode, make sure to set `ob_trx_idle_timeout` to a value greater than the timeout value of SQL queries. Otherwise, if two SQL statements in one transaction are executed at an interval longer than the value of `ob_trx_idle_timeout`, the connection will be terminated. However, if the `ob_trx_idle_timeout` parameter is set to an excessively large value, the session cannot be released in time, resulting in unnecessary memory consumption. Therefore, you must set this parameter to a proper value.

  




In addition to the preceding features, the toolbar of the editing area provides the following buttons.


|        Button         |                                                                                                                                                                                                                                                      Description                                                                                                                                                                                                                                                      |
|-----------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Run                   | Click this button to execute all the SQL statements in the current window. This button is disabled if an SQL statement is being executed in another window of the same session.                                                                                                                                                                                                                                                                                                                                       |
| Run Current Statement | Click this button to execute all the selected SQL statements or the SQL statement in the line where the pointer is located. This button is disabled if an SQL statement is being executed in another window of the same session.                                                                                                                                                                                                                                                                                      |
| Commit                | Auto-commit is turned off by default in Oracle mode, so you need to click this button to commit the current transaction. After you click this button, a dialog box appears, indicating that the current connection uses a shared session and the commit will apply to all windows. Click **Yes** to commit the transaction. In MySQL mode, auto commit is turned on by default, so this button is not displayed. This button is disabled if an SQL statement is being executed in another window of the same session. |
| Abort                 | Click this button to abort the statement that is being executed.                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Format                | Click this button to apply the formatting, such as indentation, line break, and keyword highlighting, to the selected SQL statements or all the SQL statements in the current SQL window.                                                                                                                                                                                                                                                                                                                             |
| Find and Replace      | You can enter text in the search field to find the specific content and enter text in the replacement field to replace the content found.                                                                                                                                                                                                                                                                                                                                                                             |
| Undo                  | Click this button to undo the last operation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Redo                  | Click this button to reverse an **Undo** operation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Case Sensitivity      | The system supports three capitalization options: **All C** **aps** , **All Lowercase** , and **Capitalize First Letter** . Click the corresponding option to convert the selected statements in the script to the desired capitalization format.                                                                                                                                                                                                                                                                     |
| Indent                | You can **add indents** to or **delete indents** from the statements that you selected.                                                                                                                                                                                                                                                                                                                                                                                                                               |
|                       | You can click **Add Comments** to convert the statements that you select into comments or click **Delete Comment** to convert comments to SQL statements.                                                                                                                                                                                                                                                                                                                                                             |
| IN Value Conversion   | Click this button to convert the copied rows or columns into the specified format during queries. After you paste the copied data to the SQL editing area, select the copied data and click **IN Value Conversion** to convert it into the in('A','B') format. * Column values are separated with line breaks.   * Row values are separated with spaces or tabs.                                                                   |
| Setting               | * **Delimiter** : Select the sign that you want to use as the delimiter from the drop-down list. Five types of delimiters are supported: semi-colons ( **;** ), slashes ( **/** ), double slashes ( **//** ), dollar signs ( **$** ), and double dollar signs ( **$$** ).   * **Query Result Limit** : allows you to set the maximum number of lines that a query can return. Default value: 1000.                                 |
| Save                  | Click this button to save the script in the current window. You can open a saved script when you enter the workspace again. You can view only the SQL scripts saved by yourself. The script names must be unique. After you open a saved script, you can continue to edit it.                                                                                                                                                                                                                                         |
| Execution Plan        | Click this button to view the execution plan for the SQL statement that you select or on which the pointer is located. This execution plan is estimated by the system before execution and is the result of the EXPLAINPLAN operation. Therefore, the execution data displayed may differ from the actual execution data. You can use this feature to evaluate SQL statements.  Click **Execution Plan** . In the **Plan Details** tab, click **View Formatting Info** to go to the format page.      |
| Snippet               | Click this button to view and reference built-in and custom code snippets. For more information, see [Snippet](../4.client-odc-use-workspace/6.client-odc-snippet.md).                                                                                                                                                                                                                                                                                                                                                          |



Execute a PL statement 
-------------------------------------------

You can edit a PL/SQL statement in the SQL window. Note that you must end the PL/SQL statement with the specified delimiter. 

At present, you can use the following methods to specify a delimiter in ODC:

* Click **Settings** in the toolbar of the SQL editing area. In the window that appears, select the required delimiter in the **Delimiter** field.

  

* On the **Personal Settings** page, select a required delimiter in **Delimiter Settings** . 

  **Notice**

  
  * In ODC V2.4.1 and later, you can use the `DELIMITER` statement in the editing area to define a delimiter. In **Settings** , the **Delimiter** field displays the delimiter that you specified.

    
  
  * You can directly use forward slashes (/) to separate PL/SQL statements. However, if a PL/SQL statement contains any forward slashes, you still need to set a custom delimiter.

    
  

  
  




After you execute the PL/SQL statement in the SQL window, the result tab displays the database management system (DBMS) output. 

![2](https://help-static-aliyun-doc.aliyuncs.com/assets/img/en-US/2038860461/p377643.png)

Execution Record tab 
-----------------------------------------

![User Guide - SQL window - Execution result tab](https://help-static-aliyun-doc.aliyuncs.com/assets/img/en-US/3211972561/p326145.png)

In the Execution Record tab, you can view the history of SQL statements executed in the current connection. It includes **Status** , **Time** , **SQL Statement** , **Results** , **TRACE ID** , **Time Spent** , and **Execution Details** . Execution Details is the execution plan.


|      Column       |                                                                                                                                                                                                                                                                                                                                                                                                          Description                                                                                                                                                                                                                                                                                                                                                                                                           |
|-------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Check box         | You can select the check box ![3](https://help-static-aliyun-doc.aliyuncs.com/assets/img/en-US/8939392461/p386178.jpg) in front of the record list and click **Delete** in the upper-right corner of the list to delete multiple execution records at a time.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| TRACE ID          | The ID of the execution record. **Notice**  TRACE ID is not specified. Make sure that the values of the enable_sql_audit system parameter and the ob_enable_trace_log variable are ON before you execute the statement.  1. Choose Session \> Session Properties \> Session Variable. Then, respectively search for the enable_sql_audit and ob_enable_trace_log parameters.   2. Click OFF in the list of values, click the edit icon, select ON, and click OK.   3. Run the following command to open system parameters: ```sql obclient> alter system set enable_sql_audit='True'; Query OK, 0 rows affected (0.06 sec) ```    |
| Time Spent        | **Time Spent** of an SQL statement in ODC is divided into the following three parts: * Network time spent: the time consumed to transmit the SQL statement over the network.   * ODC time spent: the time consumed to process the SQL statement by ODC.   * Database time spent: the time consumed to process the SQL statement by the database.    You can move the pointer over the icon after **Time Spent** . The time spent on executing an SQL statement is displayed in three sections in the tooltip.                                                                                                                                                                              |
| Execution Details | The text of the execution plan is displayed by default.  Click **View** in the **Execution Details** column to go to the execution details page. On this page, you can view the basic information, time spent, I/O statistics, and executed SQL statements.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |



Logs tab 
-----------------------------

You can view the execution records of the current SQL window in the Logs tab.

Results tab 
--------------------------------

You can view the execution result of the current SQL statement in the Results tab. The result set in the Results tab can be used in the following interactive operations to facilitate daily development work.


|                Operation                 |                                                                                                                                                                                                                                                                                                                                           Description                                                                                                                                                                                                                                                                                                                                            |
|------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Select required data                     | You can select the required data of a result set and copy the data to an external file using hotkeys. You can also click a field name or row number to select an entire row or column.  You can also click **Export** in the toolbar to export data of a result set to a local file.                                                                                                                                                                                                                                                                                                                                                                                             |
| Select rows and columns                  | * You can select consecutive rows or columns while holding the Shift key.   * You can select inconsecutive rows or columns while holding the Ctrl or Command key.                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Right-click a cell                       | You can right-click a cell and select **Copy Row** , **Copy** , or **Export to Clipboard** to directly export the data into an external file.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Right-click a row ID                     | You can right-click a row ID and select **Copy Row** , **Freeze this row** , or **Unlock all frozen rows** .  * Copy Row: click this option to copy the selected row.   * Freeze this row: click this option to freeze the selected row and pin it to the top. You can freeze multiple rows. The rows under the table header and frozen rows can be vertically scrolled.   * Unlock all frozen rows: click this option to unfreeze all frozen rows.                                                                                                          |
| Zoom in                                  | If the data in a cell is too long to be displayed in full, you can perform the following operations to view the data in full: 1. Place the pointer over the cell.   2. Click the zoom-in icon ![4](https://help-static-aliyun-doc.aliyuncs.com/assets/img/en-US/2038860461/p377661.jpg) that appears to the right of the cell. In the LOB dialog box that appears, you can view all the data in the cell.  **Note**  LOBs are displayed in text by default. You can convert an LOB into the hexadecimal format and download the LOB to a local device.    |
| View BLOBs                               | The SQL window supports BLOB, CLOB, and RAW data types.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Right-click the tab name of a result tab | For example, you can right-click the tab name of the **Result 1** tab and click **Pin** in the context menu to pin the tab, so that it remains displayed. In this way, when you execute a new query, a new result tab appears but does not overwrite the pinned result tab. This allows you to compare the query results.  Click **Unpin** to unpin a result tab.                                                                                                                                                                                                                                                                                                                |
| Filter, sort, and search for data        | Each field name in the result set is provided with a filter icon, a sort icon, and a search icon. You can use them to filter, sort, and search for data in a single column.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Drag the column name                     | You can adjust the order of fields by dragging column names in a result set.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |



![5](https://help-static-aliyun-doc.aliyuncs.com/assets/img/en-US/2038860461/p377663.png)

The toolbar in the navigation bar of the Result tab also provides the following tools.


|      Tool      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Column Mode    | Click this button to display the selected data row in the form of a table. On the **Column Mode** page, you can switch to the previous or next row. **Column Mode** makes it easier to view data in a row that has many columns. To use the Column Mode page, perform the following steps: 1. Select the target data and click the **Column Mode** ![Column Mode icon](https://help-static-aliyun-doc.aliyuncs.com/assets/img/en-US/2038860461/p326038.jpg)icon.   2. On the **Column Mode** page, click the left and right arrow buttons to view the values of rows and columns.   3. Move the pointer over a value field and click the zoom-in icon ![6](https://help-static-aliyun-doc.aliyuncs.com/assets/img/en-US/2038860461/p377665.jpg) to view the details.   4. In the list of **Column Mode** page, you can view the comments for a column in the **Remarks** column. To modify the comments, perform the following steps: 1. In the left-side navigation pane, right-click the target table and select **View Table Structure** to go to the table attributes tab.   2. Click the **Column** tab in the left-side navigation pane of the table attributes tab.   3. Select the field name, and click the edit icon. The **Edit Field** dialog box appears.   4. In the **Comment** field, edit the comments, and click **OK** .   5. In the **SQL Confirmation** dialog box, click **Execute** .   6. Then, the modified comments are displayed on the **Column Mode** page.      |
| Columns        | Click this button to select the columns to be displayed on the page.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Back to Start  | Click this button to go to the first page.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Previous       | Click this button to go to the previous page.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Next           | Click this button to go to the next page.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Jump to Bottom | Click this button to go to the last page.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Edit           | Click **Edit** to enable editing mode for the current result set. The editing mode supports the following operations: **Add** , **Copy Current Row** , **Delete** , **Cancel** , **Confirm Modification** , which submits a transaction when auto-commit is turned on, and **Modify and Submit** , which is displayed when auto-commit is turned off. In the editing mode, you can either double-click target data to directly modify it or click the preceding buttons for convenient operations.  When you edit a cell, you can right-click the cell and select **Copy** or **Set to Null** from the context menu to operate on the cell.  **Note**  Based on the ResultMetaData obtained after the execution of SQL statements, you can determine whether a result set can be edited. * If the result set cannot be edited, the edit icon is hidden and a message is displayed indicating that the result set cannot be edited.   * Otherwise, you can click the edit icon, and edit the result set on the editing page. You can edit a single table or view.   * The SQL window does not support editing the result sets that contain data of the SET or ENUM type.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Export         | You can export query results to files in the CSV or SQL format. * To export an SQL file: specify the **File Name** **,** **File Format** **,** **Encoding Standard** , and **Row Number Limit** of the file. The file encoding standard can be **GBK** or **UTF8** .   * To export a CSV file: specify the **File Name** **,** **File Format** **,** **Encoding Standard** , **Row Number Limit** , and **CSV Settings** of the file. The file encoding format can be **GBK** or **UTF8** .   * To export an EXCEL file: specify the file encoding format. Valid values: **GBK** , **UTF8** , **UTF16** , **GB2312** , and **BIG5** .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Plan           | Click this button to view the actual resource consumption and execution plan of an executed SQL statement. This allows you to evaluate the performance of the statement.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |


