Load and run an ODC image 
==============================================

When you upgrade OceanBase Developer Center (ODC) deployed in single-node mode, you need to obtain and run the ODC image again after you update the MetaDB and stop the ODC container of the earlier version. 

Load the image 
-----------------------------------

To obtain the ODC image on the host, select the required image from the following list and click **Download** .

* Image for X86: [Download](https://ob-front.oss-cn-hangzhou.aliyuncs.com/client/3.3.2-patch/obodc3.3.2-bp.tar.gz)

  

* Image for ARM: [Download](https://ob-front.oss-cn-hangzhou.aliyuncs.com/client/3.3.2-patch/obodc3.3.2-bp_arm.tar.gz)

  




After you obtain the image, run the following command in the command-line tool to load it:

```javascript
gunzip -c obodc-{$version}.tar.gz  docker load
```



Run the image 
----------------------------------

Execute the following sample statement in the command-line tool to run the image:

```javascript
#!/usr/bin/env bash
docker run --volume   /var/log/odc:/opt/odc/log \
-d -i --net host --cpu-period 100000 --cpu-quota 400000 --memory 8G --name "obodc" \
-e "DATABASE_HOST=100.00.00.00" \
-e "DATABASE_PORT=60805" \
-e "DATABASE_USERNAME=obodc@obodc#odc_cluster" \
-e "DATABASE_PASSWORD=obodc" \
-e "DATABASE_NAME=odc_metadb" \
-e "ODC_PROFILE_MODE=alipay" \
reg.docker.alibaba-inc.com/oceanbase/odc-server:{image_tag}
```



You can run the `docker images` command to view the {image_tag} parameter on the host after you load the image. The following table describes other parameters used in the preceding sample statement.


|                Parameter                 |                                                                                                                                                                                                                                                                                                                                                                  Description                                                                                                                                                                                                                                                                                                                                                                   |
|------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| --volume                                 | Maps the `/var/log/odc` directory of the host to the `/opt/odc/log` directory in the ODC container.  If the `/var/log/odc` directory does not exist on the host, run the `mkdir -p /var/log/odc` command to create one.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| --net                                    | The network configuration of the Docker container. If you set this parameter to `host`, the host network is directly used.  You can also use the `--publish` (`-p`) parameter to configure port mapping. However, the Docker container may fail to start in some circumstances due to incorrect DNS resolution in the Docker container. In this case, run the `--net host` command to start the Docker container.                                                                                                                                                                                                                                                                                                              |
| --cpu-period --cpu-quota | * The `---cpu-period` parameter specifies the interval at which the CPU cores of the Docker container are reallocated. Unit: microseconds.   * The `---cpu-quota` parameter specifies the maximum time for running the current Docker container in this interval. Unit: microseconds.    You can use these two parameters in combination to specify the number of CPU cores that the Docker container uses. The value is calculated by dividing cpu-quota by cpu-period. In the preceding sample statement, the values of cpu-quota and cpu-period are respectively 400000 and 100000, indicating that the Docker container can use at most four CPU cores. |
| --memory                                 | The maximum memory size for the Docker container.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| --name                                   | The name of the container.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| DATABASE_HOST                            | The IP address of the MetaDB.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| DATABASE_PORT                            | The port number of the MetaDB.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| DATABASE_USERNAME                        | The username of the MetaDB. In OceanBase Database, the username is given in the db_user@tenant_name#cluster_name format.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| DATABASE_PASSWORD                        | The password for connecting to the database.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| DATABASE_NAME                            | The name of the MetaDB.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| ODC_PROFILE_MODE                         | The mode. Default value: `alipay`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |



In addition to the preceding parameters, you can also use the following parameters when running the image.


|       Parameter       |                                                                                                                                                                                                                                                                                 Description                                                                                                                                                                                                                                                                                  |
|-----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ODC_LOG_DIR           | The log directory. Default value: `/opt/odc/log`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| OBCLIENT_WORK_DIR     | The working directory of OBClient. Default value: `/opt/odc/data`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ODC_JAR_FILE          | The directory of JAR files. Default value:  `/opt/odc/lib/odc-web-starter-*.jar`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| ODC_WORK_DIR          | The working directory of ODC. Default value: `/opt/odc/script`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ODC_JVM_HEAP_OPTIONS  | The JVM stack memory. The default maximum value of the parameter `-Xmx` is 60% of available physical memory size.  ODC checks whether the available memory in the current environment reaches 2048 MB before it starts a script. Assume that this parameter is set to 60%, the available memory must be at least 3.4 GB to start the script. If the available memory of the host or Docker container is less than 3.4 GB, you can skip memory check by setting the `ODC_JVM_HEAP_OPTIONS` parameter. For example, you can set it to `"-Xmx2048m -Xms2048m"`. |
| ODC_JVM_GC_OPTIONS    | The garbage collection (GC) strategy for JVM. Default value: `-XX:+UseG1GC -XX:+PrintAdaptiveSizePolicy -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -Xloggc:/opt/odc/log/gc.log -XX:+UseGCLogFileRotation -XX:GCLogFileSize=50M -XX:NumberOfGCLogFiles=5`.                                                                                                                                                                                                                                                                                             |
| ODC_JVM_OOM_OPTIONS   | The OutOfMemory strategy for JVM. Default value: `-XX:+ExitOnOutOfMemoryError`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ODC_JVM_EXTRA_OPTIONS | Other JVM parameters. By default, no parameter is specified.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ODC_SERVER_PORT       | The HTTP listening port for ODC-Server. Default value: 8989.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ODC_HOST              | The IP address of ODC, which can be used as the destination IP address for remote procedure calls in high-availability deployment scenarios.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ODC_PORT              | The port number of ODC, which can be used as the destination port number for remote procedure calls in high-availability deployment scenarios.  **Note**  This parameter is independent of the ODC_SERVER_PORT parameter. It is required only for initiating remote procedure calls.                                                                                                                                                                                                                                                         |
| ODC_APP_EXTRA_ARGS    | Other App parameters need to be specified. For example, `--server.servlet.session.timeout=10m`, indicating that the Session period is 10 minutes. The default value is empty.                                                                                                                                                                                                                                                                                                                                                                                |



