Rollback after upgrade failed 
==================================================

After you upgrade Web ODC, you can roll back it if serious problems occur after the upgrade. 

To roll back Web ODC, run the following commands in the command-line tool of the host and run the ODC image of the version that you want to roll back to:

```javascript
#!/usr/bin/env bash
docker run -d -i --net host --cpu-period 100000 --cpu-quota 400000 --memory 8G --name "obodc" 
-e "DATABASE_HOST=100.00.00.00" 
-e "DATABASE_PORT=60805" 
-e "DATABASE_USERNAME=obodc@obodc#odc_cluster" 
-e "DATABASE_PASSWORD=obodc" 
-e "DATABASE_NAME=odc_metadb" 
-e "ODC_PROFILE_MODE=alipay"
reg.docker.alibaba-inc.com/oceanbase/odc-server:{image_tag}
```



You can run the `docker images` statement to view {image_tag} on the host after you load the image. The following table describes other parameters.


|         Parameter         |                                                                                                                                                                                                                                                                                                                     Description                                                                                                                                                                                                                                                                                                                     |
|---------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| --net                     | Specifies the network configuration of the Docker container. If you set this parameter to `host`, the host network is directly used.  You can also use the `--publish` (`-p`) parameter to configure port mapping. However, the Docker container may fail to start up in some circumstances due to incorrect domain name resolution (DNS) in the Docker container. In this case, run the `--net host` command to start the Docker container.                                                                                                                                                                                        |
| --cpu-period  --cpu-quota | The --cpu-period option specifies the interval in which the CPU cores of the Docker container is reallocated. Unit: microseconds. The --cpu-quota option specifies the maximum time for running the current Docker container in this interval. Unit: microseconds.  You can use these two options in combination to specify the number of CPU cores that the Docker container uses. The value is calculated by dividing cpu-quota by cpu-period. In the preceding sample statement, the values of cpu-quota and cpu-period are respectively 400000 and 100000, indicating that the Docker container can use at most four CPU cores. |
| --memory                  | Specifies the maximum memory size for the Docker container.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| --name                    | Specifies the name of the container.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| DATABASE_HOST             | Specifies the IP address of the MetaDB.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| DATABASE_PORT             | Specifies the port number of the MetaDB.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| DATABASE_USERNAME         | Specifies the username of the MetaDB. In OceanBase Database, the username is given in the db_user@tenant_name#cluster_name format.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| DATABASE_PASSWORD         | Specifies the username for connecting to the database.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| DATABASE_NAME             | Specifies the name of the MetaDB.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| ODC_PROFILE_MODE          | Specifies the mode, which is `alipay` by default.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |


